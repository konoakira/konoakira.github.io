{"version":3,"sources":["webpack://hexo-theme-archer/./src/js/search.js"],"names":["$","document","ready","algoliaSettings","algolia","applicationID","apiKey","indexName","search","instantsearch","appId","searchFunction","helper","find","val","widgets","searchBox","container","placeholder","labels","input_placeholder","hits","hitsPerPage","per_page","templates","item","data","permalink","siteMeta","root","path","_highlightResult","title","value","empty","hits_empty","replace","query","cssClasses","stats","body","hits_stats","nbHits","processingTimeMS","pagination","scrollTo","showFirstLast","first","last","previous","next","link","active","disabled","forEach","addWidget","start","on","e","stopPropagation","append","css","toggle","focus","click","hide","remove","window","console","error"],"mappings":"AAGEA,EAAEC,UAAUC,OAAM,WAChB,IAAIC,EAAkBC,QAMtB,GAJED,EAAgBE,eAChBF,EAAgBG,QAChBH,EAAgBI,UAElB,CAKA,IAAIC,EAASC,cAAc,CACzBC,MAAOP,EAAgBE,cACvBC,OAAQH,EAAgBG,OACxBC,UAAWJ,EAAgBI,UAC3BI,eAAgB,SAASC,GACLZ,EAAE,yBAAyBa,KAAK,SAElCC,OACdF,EAAOJ,YAMZ,CACCC,cAAcM,QAAQC,UAAU,CAC9BC,UAAW,wBACXC,YAAaf,EAAgBgB,OAAOC,oBAGtCX,cAAcM,QAAQM,KAAK,CACzBJ,UAAW,gBACXK,YAAanB,EAAgBkB,KAAKE,UAAY,GAC9CC,UAAW,CACTC,KAAM,SAASC,GAIb,MACE,aAJSA,EAAKC,UACZD,EAAKC,UACLC,SAASC,KAAOH,EAAKI,MAIvB,mCACAJ,EAAKK,iBAAiBC,MAAMC,MAC5B,QAGJC,MAAO,SAASR,GACd,MACE,gCACAvB,EAAgBgB,OAAOgB,WAAWC,QAChC,aACAV,EAAKW,OAEP,WAINC,WAAY,CACVb,KAAM,sBAIVhB,cAAcM,QAAQwB,MAAM,CAC1BtB,UAAW,iBACXO,UAAW,CACTgB,KAAM,SAASd,GAIb,OAHYvB,EAAgBgB,OAAOsB,WAChCL,QAAQ,YAAaV,EAAKgB,QAC1BN,QAAQ,YAAaV,EAAKiB,kBAE3BJ,6CAGAX,SAASC,KAHTU,6DAYR9B,cAAcM,QAAQ6B,WAAW,CAC/B3B,UAAW,sBACX4B,UAAU,EACVC,eAAe,EACf3B,OAAQ,CACN4B,MAAO,0CACPC,KAAM,2CACNC,SAAU,mCACVC,KAAM,qCAERZ,WAAY,CACVT,KAAM,aACNJ,KAAM,kBACN0B,KAAM,cACNC,OAAQ,UACRC,SAAU,oBAGdC,QAAQ9C,EAAO+C,UAAW/C,GAE5BA,EAAOgD,QAEPxD,EAAE,kBAAkByD,GAAG,SAAS,SAASC,GACvCA,EAAEC,kBACF3D,EAAE,QACC4D,OAAO,gEACPC,IAAI,WAAY,UACnB7D,EAAE,UAAU8D,SACZ9D,EAAE,yBACCa,KAAK,SACLkD,WAGL/D,EAAE,oBAAoBgE,OAAM,WAC1BhE,EAAE,UAAUiE,OACZjE,EAAE,wBAAwBkE,SAC1BlE,EAAE,QAAQ6D,IAAI,WAAY,YAhH1BM,OAAOC,QAAQC,MAAM","file":"search.js","sourcesContent":["// special thanks to https://blog.naaln.com/2016/07/hexo-with-algolia/\n\nconst initAlgolia = () => {\n  $(document).ready(function() {\n    let algoliaSettings = algolia\n    let isAlgoliaSettingsValid =\n      algoliaSettings.applicationID &&\n      algoliaSettings.apiKey &&\n      algoliaSettings.indexName\n\n    if (!isAlgoliaSettingsValid) {\n      window.console.error('Algolia Settings are invalid.')\n      return\n    }\n\n    let search = instantsearch({\n      appId: algoliaSettings.applicationID,\n      apiKey: algoliaSettings.apiKey,\n      indexName: algoliaSettings.indexName,\n      searchFunction: function(helper) {\n        let searchInput = $('#algolia-search-input').find('input')\n\n        if (searchInput.val()) {\n          helper.search()\n        }\n      }\n    })\n\n    // Registering Widgets\n    ;[\n      instantsearch.widgets.searchBox({\n        container: '#algolia-search-input',\n        placeholder: algoliaSettings.labels.input_placeholder\n      }),\n\n      instantsearch.widgets.hits({\n        container: '#algolia-hits',\n        hitsPerPage: algoliaSettings.hits.per_page || 10,\n        templates: {\n          item: function(data) {\n            let link = data.permalink\n              ? data.permalink\n              : siteMeta.root + data.path\n            return (\n              '<a href=\"' +\n              link +\n              '\" class=\"algolia-hit-item-link\">' +\n              data._highlightResult.title.value +\n              '</a>'\n            )\n          },\n          empty: function(data) {\n            return (\n              '<div id=\"algolia-hits-empty\">' +\n              algoliaSettings.labels.hits_empty.replace(\n                /\\$\\{query}/,\n                data.query\n              ) +\n              '</div>'\n            )\n          }\n        },\n        cssClasses: {\n          item: 'algolia-hit-item'\n        }\n      }),\n\n      instantsearch.widgets.stats({\n        container: '#algolia-stats',\n        templates: {\n          body: function(data) {\n            let stats = algoliaSettings.labels.hits_stats\n              .replace(/\\$\\{hits}/, data.nbHits)\n              .replace(/\\$\\{time}/, data.processingTimeMS)\n            return (\n              stats +\n              '<span class=\"algolia-powered\">' +\n              '  <img src=\"' +\n              siteMeta.root +\n              'assets/algolia_logo.svg\" alt=\"Algolia\" />' +\n              '</span>' +\n              '<hr />'\n            )\n          }\n        }\n      }),\n\n      instantsearch.widgets.pagination({\n        container: '#algolia-pagination',\n        scrollTo: false,\n        showFirstLast: false,\n        labels: {\n          first: '<i class=\"fa fa-angle-double-left\"></i>',\n          last: '<i class=\"fa fa-angle-double-right\"></i>',\n          previous: '<i class=\"fa fa-angle-left\"></i>',\n          next: '<i class=\"fa fa-angle-right\"></i>'\n        },\n        cssClasses: {\n          root: 'pagination',\n          item: 'pagination-item',\n          link: 'page-number',\n          active: 'current',\n          disabled: 'disabled-item'\n        }\n      })\n    ].forEach(search.addWidget, search)\n\n    search.start()\n\n    $('.popup-trigger').on('click', function(e) {\n      e.stopPropagation()\n      $('body')\n        .append('<div class=\"search-popup-overlay algolia-pop-overlay\"></div>')\n        .css('overflow', 'hidden')\n      $('.popup').toggle()\n      $('#algolia-search-input')\n        .find('input')\n        .focus()\n    })\n\n    $('.popup-btn-close').click(function() {\n      $('.popup').hide()\n      $('.algolia-pop-overlay').remove()\n      $('body').css('overflow', '')\n    })\n  })\n}\n\ninitAlgolia()"],"sourceRoot":""}