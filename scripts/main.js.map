{"version":3,"sources":["webpack://hexo-theme-archer/./node_modules/anchor-js/anchor.js","webpack://hexo-theme-archer/./node_modules/eventemitter3/index.js","webpack://hexo-theme-archer/webpack/bootstrap","webpack://hexo-theme-archer/webpack/runtime/compat get default export","webpack://hexo-theme-archer/webpack/runtime/define property getters","webpack://hexo-theme-archer/webpack/runtime/hasOwnProperty shorthand","webpack://hexo-theme-archer/./src/js/init.js","webpack://hexo-theme-archer/./src/js/util.js","webpack://hexo-theme-archer/./node_modules/perfect-scrollbar/dist/perfect-scrollbar.esm.js","webpack://hexo-theme-archer/./src/js/sidebar.js","webpack://hexo-theme-archer/./src/js/initSidebar.js","webpack://hexo-theme-archer/./src/js/mobile.js","webpack://hexo-theme-archer/./src/js/tag.js","webpack://hexo-theme-archer/./src/js/toc.js","webpack://hexo-theme-archer/./src/js/fancybox.js","webpack://hexo-theme-archer/./src/js/main.js","webpack://hexo-theme-archer/./src/js/scroll.js"],"names":["root","factory","AnchorJS","options","_applyRemainingDefaultOptions","opts","icon","Object","prototype","hasOwnProperty","call","visible","placement","ariaLabel","class","base","truncate","Math","floor","titleText","_getElements","input","elements","String","slice","document","querySelectorAll","Array","isArray","NodeList","TypeError","_addBaselineStyles","head","querySelector","firstStyleEl","style","createElement","linkRule","hoverRule","anchorjsLinkFontFace","pseudoElContent","className","appendChild","createTextNode","undefined","insertBefore","sheet","insertRule","cssRules","length","this","isTouchDevice","Boolean","window","TouchEvent","DocumentTouch","add","selector","elsWithIds","idList","elementID","i","index","count","tidyText","newTidyText","anchor","visibleOptionToUse","hrefBase","indexesToDrop","map","el","id","hasAnchorJSLink","push","hasAttribute","getAttribute","urlify","textContent","indexOf","setAttribute","title","location","pathname","search","href","opacity","font","lineHeight","position","marginLeft","paddingRight","firstChild","paddingLeft","splice","concat","remove","domAnchor","removeChild","removeAll","text","textareaElement","innerHTML","value","nonsafeChars","trim","replace","substring","toLowerCase","hasLeftAnchor","hasRightAnchor","lastChild","has","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","apply","j","on","removeAllListeners","off","prefixed","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","defineProperty","enumerable","get","obj","prop","$introImg","$","introPlaceholder","bgRegResult","css","match","console","log","bgURL","img","Image","onload","info","src","addEventListener","removeClass","anchors","backTop","preventDefault","topTimer","setInterval","currTop","scrollTop","scrollTo","max","clearInterval","getAbsPosition","e","x","offsetLeft","y","offsetTop","offsetParent","dateFormater","date","fmt","getMonth","getDate","getHours","getMinutes","getSeconds","S","getMilliseconds","k","test","RegExp","$1","getFullYear","substr","rafTick","ticking","updateFunc","requestAnimationFrame","element","getComputedStyle","set","val","div","elMatches","Element","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","query","Error","parentNode","queryChildren","filter","children","child","cls","thumb","rail","consuming","focus","clicking","active","scrolling","scrollingClassTimeout","addScrollingClass","classList","contains","clearTimeout","removeScrollingClass","setTimeout","isAlive","settings","scrollingThreshold","EventElement","prototypeAccessors","isEmpty","configurable","bind","eventName","handler","unbind","target","this$1","removeEventListener","unbindAll","keys","every","defineProperties","EventManager","eventElements","createEvent","CustomEvent","initCustomEvent","processScrollDiff","axis","diff","useScrollingClass","forceFireReachEvent","fields","ref","contentHeight","containerHeight","up","down","reach","dispatchEvent","setScrollingClassInstantly","processScrollDiff$1","toInt","parseInt","eventElement","forEach","onceHandler","env","isWebKit","documentElement","supportsTouch","navigator","maxTouchPoints","supportsIePointer","msMaxTouchPoints","isChrome","userAgent","updateGeometry","roundedScrollTop","rect","getBoundingClientRect","containerWidth","ceil","width","height","contentWidth","scrollWidth","scrollHeight","scrollbarXRail","scrollbarYRail","suppressScrollX","scrollXMarginOffset","scrollbarXActive","railXWidth","railXMarginWidth","railXRatio","scrollbarXWidth","getThumbSize","scrollbarXLeft","negativeScrollAdjustment","scrollLeft","suppressScrollY","scrollYMarginOffset","scrollbarYActive","railYHeight","railYMarginHeight","railYRatio","scrollbarYHeight","scrollbarYTop","xRailOffset","isRtl","left","isScrollbarXUsingBottom","bottom","scrollbarXBottom","top","scrollbarXTop","yRailOffset","isScrollbarYUsingRight","right","scrollbarYRight","scrollbarYOuterWidth","scrollbarYLeft","scrollbarX","railBorderXWidth","scrollbarY","railBorderYWidth","updateCss","thumbSize","minScrollbarLength","maxScrollbarLength","min","bindMouseScrollHandler","pageY","startingScrollTop","startingMousePageY","scrollBy","mouseMoveHandler","touches","stopPropagation","mouseUpHandler","ownerDocument","bindMoves","touchMode","direction","pageYOffset","pageX","pageXOffset","keyboard","isDefaultPrevented","defaultPrevented","activeElement","tagName","contentDocument","shadowRoot","deltaX","deltaY","which","metaKey","altKey","shiftKey","wheelPropagation","shouldPreventDefault","wheel","mousewheelHandler","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","getDeltaFromEvent","cursor","overflowY","maxScrollTop","clientHeight","overflowX","maxScrollLeft","clientWidth","shouldBeConsumedByChild","shouldPrevent","useBothWheelAxes","wheelSpeed","isTop","isBottom","offsetHeight","isLeft","isRight","offsetWidth","abs","ctrlKey","onwheel","onmousewheel","touch","startOffset","startTime","speed","easingLoop","touchStart","touchMove","touchEnd","PointerEvent","MSPointerEvent","applyTouchMove","differenceX","differenceY","getTouch","targetTouches","shouldHandle","pointerType","buttons","MSPOINTER_TYPE_MOUSE","Date","getTime","currentOffset","currentTime","timeGap","magnitudeX","magnitudeY","scrollY","swipeEasing","isInitialized","PerfectScrollbar","userSettings","nodeName","result","originalScrollLeft","blur","isNegativeScroll","railXStyle","isNaN","borderLeftWidth","borderRightWidth","display","marginRight","railYStyle","styles","borderTopWidth","borderBottomWidth","marginTop","marginBottom","handlerName","lastScrollTop","lastScrollLeft","onScroll","update","destroy","removePsClasses","split","join","Sidebar","defaultOptions","activeIndex","_initElements","_initTabs","_bindTabsClick","_bindButtonClick","_bindWrapperClick","_bindWrapperTransitionEnd","perfectScrollbar","$sidebar","sidebar","$tabs","tabs","$panels","panels","$menuButton","menuButton","$nav","nav","$content","content","each","tab","data","addClass","toIndex","_switchTo","hasClass","_switchTab","_switchPanel","click","$target","switchTo","activateSidebar","_inactivateSidebar","MetaInfo","metaName","labelsContainer","postContainer","currLabelName","isInited","postsArr","indexMap","Map","_bindLabelClick","_changeList","_changeFocus","changeLabel","label","getElementsByClassName","item","indexArr","corrArr","_createPostsDom","error","frag","createDocumentFragment","_createPostDom","postInfo","$tagItem","archerUtil","parse","$aItem","siteMeta","path","append","toString","postIndex","currPostLabels","tagOrCatetory","size","tabCount","Emitter","metas","_initMap","dataMaps","_subscribe","_fetchInfo","_bindOtherClick","para","newMeta","postsContainer","tryInit","_tryInitMetas","contentURL","Number","xhr","XMLHttpRequest","responseType","open","$loadFailed","that","contentJSON","posts","status","JSON","responseText","$currPostsContainer","send","body","prevHeight","isPassingThrough","currHeight","linkHeight","calcScrollIntoScreenIndex","heights","anchorLinkIndex","calcAnchorLink","initFold","toc","li","showAllChildren","node","showItem","tocItems","headers","link","currHeightIndex","currItem","resetFold","tocItem","currNode","spreadParentNodeOfTargetItem","fancyBoxInit","outer","outerHTML","imgSrc","exec","imgAlt","logStyle","init","$banner","$postBanner","find","$bgEle","$homeLink","$backTop","$sidebarMenu","bgTitleHeight","offset","outerHeight","$tocWrapper","$tocCatalog","$progressBar","toggleClass","previousHeight","continueScroll","crossingState","isHigherThanIntro","isCrossingIntro","articleHeight","articleTop","isPostPage","tickingScroll","updateScroll","upDownState","beginY","readPercent","windowHeight","restPercent","transform","updateProgress","bindedUpdate","ele","scroll","InitSidebarLink","addTab","matchMedia","mql","mediaChangeHandler","innerWidth","initMobile"],"mappings":";+BAAA,WAIC,SAAUA,EAAMC,GACf,aAIE,EAAO,QAAW,0BAAP,EAWP,WAGN,SAASC,EAASC,GAQhB,SAASC,EAA8BC,GACrCA,EAAKC,KAAOC,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,QAAUA,EAAKC,KAAO,IAC7ED,EAAKM,QAAUJ,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,WAAaA,EAAKM,QAAU,QACtFN,EAAKO,UAAYL,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,aAAeA,EAAKO,UAAY,QAC5FP,EAAKQ,UAAYN,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,aAAeA,EAAKQ,UAAY,SAC5FR,EAAKS,MAAQP,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,SAAWA,EAAKS,MAAQ,GAChFT,EAAKU,KAAOR,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,QAAUA,EAAKU,KAAO,GAE7EV,EAAKW,SAAWT,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,YAAcY,KAAKC,MAAMb,EAAKW,UAAY,GACrGX,EAAKc,UAAYZ,OAAOC,UAAUC,eAAeC,KAAKL,EAAM,aAAeA,EAAKc,UAAY,GAqP9F,SAASC,EAAaC,GACpB,IAAIC,EACJ,GAAqB,iBAAVD,GAAsBA,aAAiBE,OAEhDD,EAAW,GAAGE,MAAMd,KAAKe,SAASC,iBAAiBL,QAE9C,MAAIM,MAAMC,QAAQP,IAAUA,aAAiBQ,UAGlD,MAAM,IAAIC,UAAU,kDAFpBR,EAAW,GAAGE,MAAMd,KAAKW,GAK3B,OAAOC,EAOT,SAASS,IAEP,GAAsD,OAAlDN,SAASO,KAAKC,cAAc,kBAAhC,CAIA,IAsBIC,EAtBAC,EAAQV,SAASW,cAAc,SAC/BC,EACA,sHAMAC,EACA,wDAIAC,EACA,s4CAIAC,EACA,gEAKJL,EAAMM,UAAY,WAClBN,EAAMO,YAAYjB,SAASkB,eAAe,UAMrBC,KADrBV,EAAeT,SAASO,KAAKC,cAAc,6BAEzCR,SAASO,KAAKU,YAAYP,GAE1BV,SAASO,KAAKa,aAAaV,EAAOD,GAGpCC,EAAMW,MAAMC,WAAWV,EAAUF,EAAMW,MAAME,SAASC,QACtDd,EAAMW,MAAMC,WAAWT,EAAWH,EAAMW,MAAME,SAASC,QACvDd,EAAMW,MAAMC,WAAWP,EAAiBL,EAAMW,MAAME,SAASC,QAC7Dd,EAAMW,MAAMC,WAAWR,EAAsBJ,EAAMW,MAAME,SAASC,SAtUpEC,KAAK/C,QAAUA,GAAW,GAC1B+C,KAAK5B,SAAW,GAkBhBlB,EAA8B8C,KAAK/C,SAOnC+C,KAAKC,cAAgB,WACnB,OAAOC,QAAQ,iBAAkBC,QAAUA,OAAOC,YAAcD,OAAOE,eAAiB9B,oBAAoB8B,gBAS9GL,KAAKM,IAAM,SAASC,GAClB,IAAInC,EACAoC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAgB,GAoBpB,GAdAjE,EAA8B8C,KAAK/C,SAGR,WAD3BgE,EAAqBjB,KAAK/C,QAAQQ,WAEhCwD,EAAqBjB,KAAKC,gBAAkB,SAAW,SAIpDM,IACHA,EAAW,sBAKW,KAFxBnC,EAAWF,EAAaqC,IAEXR,OACX,OAAOC,KAWT,IARAnB,IAGA2B,EAAajC,SAASC,iBAAiB,QACvCiC,EAAS,GAAGW,IAAI5D,KAAKgD,GAAY,SAASa,GACxC,OAAOA,EAAGC,MAGPX,EAAI,EAAGA,EAAIvC,EAAS2B,OAAQY,IAC/B,GAAIX,KAAKuB,gBAAgBnD,EAASuC,IAChCQ,EAAcK,KAAKb,OADrB,CAKA,GAAIvC,EAASuC,GAAGc,aAAa,MAC3Bf,EAAYtC,EAASuC,GAAGe,aAAa,WAChC,GAAItD,EAASuC,GAAGc,aAAa,kBAClCf,EAAYtC,EAASuC,GAAGe,aAAa,sBAChC,CAKLX,EAJAD,EAAWd,KAAK2B,OAAOvD,EAASuC,GAAGiB,aAKnCf,EAAQ,EACR,QACgBnB,IAAVkB,IACFG,EAAcD,EAAW,IAAMD,GAGjCD,EAAQH,EAAOoB,QAAQd,GACvBF,GAAS,SACS,IAAXD,GAETA,OAAQlB,EACRe,EAAOe,KAAKT,GAEZ3C,EAASuC,GAAGmB,aAAa,KAAMf,GAC/BL,EAAYK,GAUdC,EAASzC,SAASW,cAAc,MACzBK,UAAY,iBAAmBS,KAAK/C,QAAQW,MACnDoD,EAAOc,aAAa,aAAc9B,KAAK/C,QAAQU,WAC/CqD,EAAOc,aAAa,qBAAsB9B,KAAK/C,QAAQG,MACnD4C,KAAK/C,QAAQgB,YACf+C,EAAOe,MAAQ/B,KAAK/C,QAAQgB,WAI9BiD,EAAW3C,SAASQ,cAAc,QAAUoB,OAAO6B,SAASC,SAAW9B,OAAO6B,SAASE,OAAS,GAChGhB,EAAWlB,KAAK/C,QAAQY,MAAQqD,EAChCF,EAAOmB,KAAOjB,EAAW,IAAMR,EAEJ,WAAvBO,IACFD,EAAO/B,MAAMmD,QAAU,KAGC,MAAtBpC,KAAK/C,QAAQG,OACf4D,EAAO/B,MAAMoD,KAAO,uBAMW,SAA3BrC,KAAK/C,QAAQS,YACfsD,EAAO/B,MAAMqD,WAAa,YAIC,SAA3BtC,KAAK/C,QAAQS,WACfsD,EAAO/B,MAAMsD,SAAW,WACxBvB,EAAO/B,MAAMuD,WAAa,OAC1BxB,EAAO/B,MAAMwD,aAAe,OAC5BrE,EAASuC,GAAGhB,aAAaqB,EAAQ5C,EAASuC,GAAG+B,cAE7C1B,EAAO/B,MAAM0D,YAAc,SAC3BvE,EAASuC,GAAGnB,YAAYwB,IAI5B,IAAKL,EAAI,EAAGA,EAAIQ,EAAcpB,OAAQY,IACpCvC,EAASwE,OAAOzB,EAAcR,GAAKA,EAAG,GAKxC,OAFAX,KAAK5B,SAAW4B,KAAK5B,SAASyE,OAAOzE,GAE9B4B,MASTA,KAAK8C,OAAS,SAASvC,GAKrB,IAJA,IAAIK,EACAmC,EACA3E,EAAWF,EAAaqC,GAEnBI,EAAI,EAAGA,EAAIvC,EAAS2B,OAAQY,KACnCoC,EAAY3E,EAASuC,GAAG5B,cAAc,sBAIrB,KADf6B,EAAQZ,KAAK5B,SAASyD,QAAQzD,EAASuC,MAErCX,KAAK5B,SAASwE,OAAOhC,EAAO,GAI9BxC,EAASuC,GAAGqC,YAAYD,IAI5B,OAAO/C,MAMTA,KAAKiD,UAAY,WACfjD,KAAK8C,OAAO9C,KAAK5B,WAYnB4B,KAAK2B,OAAS,SAASuB,GAErB,IAAIC,EAAkB5E,SAASW,cAAc,YAC7CiE,EAAgBC,UAAYF,EAC5BA,EAAOC,EAAgBE,MAIvB,IAAIC,EAAe,qDAUnB,OANKtD,KAAK/C,QAAQa,UAChBZ,EAA8B8C,KAAK/C,SAK9BiG,EAAKK,OACTC,QAAQ,MAAO,IACfA,QAAQF,EAAc,KACtBE,QAAQ,SAAU,KAClBC,UAAU,EAAGzD,KAAK/C,QAAQa,UAC1B0F,QAAQ,YAAa,IACrBE,eASL1D,KAAKuB,gBAAkB,SAASF,GAC9B,IAAIsC,EAAgBtC,EAAGqB,aAAe,IAAMrB,EAAGqB,WAAWnD,UAAY,KAAKsC,QAAQ,oBAAsB,EACrG+B,EAAiBvC,EAAGwC,YAAc,IAAMxC,EAAGwC,UAAUtE,UAAY,KAAKsC,QAAQ,oBAAsB,EAExG,OAAO8B,GAAiBC,IAAkB,GA+E9C,OAAO5G,IAzVa,+BALtB,I,qBCFA,IAAI8G,EAAMzG,OAAOC,UAAUC,eACvBwG,EAAS,IASb,SAASC,KA4BT,SAASC,EAAGC,EAAIC,EAASC,GACvBpE,KAAKkE,GAAKA,EACVlE,KAAKmE,QAAUA,EACfnE,KAAKoE,KAAOA,IAAQ,EActB,SAASC,EAAYC,EAASC,EAAOL,EAAIC,EAASC,GAChD,GAAkB,mBAAPF,EACT,MAAM,IAAItF,UAAU,mCAGtB,IAAI4F,EAAW,IAAIP,EAAGC,EAAIC,GAAWG,EAASF,GAC1CK,EAAMV,EAASA,EAASQ,EAAQA,EAMpC,OAJKD,EAAQI,QAAQD,GACXH,EAAQI,QAAQD,GAAKP,GAC1BI,EAAQI,QAAQD,GAAO,CAACH,EAAQI,QAAQD,GAAMD,GADhBF,EAAQI,QAAQD,GAAKjD,KAAKgD,IADlCF,EAAQI,QAAQD,GAAOD,EAAUF,EAAQK,gBAI7DL,EAUT,SAASM,EAAWN,EAASG,GACI,KAAzBH,EAAQK,aAAoBL,EAAQI,QAAU,IAAIV,SAC5CM,EAAQI,QAAQD,GAU9B,SAASI,IACP7E,KAAK0E,QAAU,IAAIV,EACnBhE,KAAK2E,aAAe,EAxElBtH,OAAOyH,SACTd,EAAO1G,UAAYD,OAAOyH,OAAO,OAM5B,IAAId,GAASe,YAAWhB,GAAS,IA2ExCc,EAAavH,UAAU0H,WAAa,WAClC,IACIC,EACAC,EAFAC,EAAQ,GAIZ,GAA0B,IAAtBnF,KAAK2E,aAAoB,OAAOQ,EAEpC,IAAKD,KAASD,EAASjF,KAAK0E,QACtBZ,EAAItG,KAAKyH,EAAQC,IAAOC,EAAM3D,KAAKuC,EAASmB,EAAK5G,MAAM,GAAK4G,GAGlE,OAAI7H,OAAO+H,sBACFD,EAAMtC,OAAOxF,OAAO+H,sBAAsBH,IAG5CE,GAUTN,EAAavH,UAAU+H,UAAY,SAAmBd,GACpD,IAAIE,EAAMV,EAASA,EAASQ,EAAQA,EAChCe,EAAWtF,KAAK0E,QAAQD,GAE5B,IAAKa,EAAU,MAAO,GACtB,GAAIA,EAASpB,GAAI,MAAO,CAACoB,EAASpB,IAElC,IAAK,IAAIvD,EAAI,EAAG4E,EAAID,EAASvF,OAAQyF,EAAK,IAAI/G,MAAM8G,GAAI5E,EAAI4E,EAAG5E,IAC7D6E,EAAG7E,GAAK2E,EAAS3E,GAAGuD,GAGtB,OAAOsB,GAUTX,EAAavH,UAAUmI,cAAgB,SAAuBlB,GAC5D,IAAIE,EAAMV,EAASA,EAASQ,EAAQA,EAChCc,EAAYrF,KAAK0E,QAAQD,GAE7B,OAAKY,EACDA,EAAUnB,GAAW,EAClBmB,EAAUtF,OAFM,GAYzB8E,EAAavH,UAAUoI,KAAO,SAAcnB,EAAOoB,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,IAAItB,EAAMV,EAASA,EAASQ,EAAQA,EAEpC,IAAKvE,KAAK0E,QAAQD,GAAM,OAAO,EAE/B,IAEIuB,EACArF,EAHA0E,EAAYrF,KAAK0E,QAAQD,GACzBwB,EAAMC,UAAUnG,OAIpB,GAAIsF,EAAUnB,GAAI,CAGhB,OAFImB,EAAUjB,MAAMpE,KAAKmG,eAAe5B,EAAOc,EAAUnB,QAAIxE,GAAW,GAEhEuG,GACN,KAAK,EAAG,OAAOZ,EAAUnB,GAAG1G,KAAK6H,EAAUlB,UAAU,EACrD,KAAK,EAAG,OAAOkB,EAAUnB,GAAG1G,KAAK6H,EAAUlB,QAASwB,IAAK,EACzD,KAAK,EAAG,OAAON,EAAUnB,GAAG1G,KAAK6H,EAAUlB,QAASwB,EAAIC,IAAK,EAC7D,KAAK,EAAG,OAAOP,EAAUnB,GAAG1G,KAAK6H,EAAUlB,QAASwB,EAAIC,EAAIC,IAAK,EACjE,KAAK,EAAG,OAAOR,EAAUnB,GAAG1G,KAAK6H,EAAUlB,QAASwB,EAAIC,EAAIC,EAAIC,IAAK,EACrE,KAAK,EAAG,OAAOT,EAAUnB,GAAG1G,KAAK6H,EAAUlB,QAASwB,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAKpF,EAAI,EAAGqF,EAAO,IAAIvH,MAAMwH,EAAK,GAAItF,EAAIsF,EAAKtF,IAC7CqF,EAAKrF,EAAI,GAAKuF,UAAUvF,GAG1B0E,EAAUnB,GAAGkC,MAAMf,EAAUlB,QAAS6B,OACjC,CACL,IACIK,EADAtG,EAASsF,EAAUtF,OAGvB,IAAKY,EAAI,EAAGA,EAAIZ,EAAQY,IAGtB,OAFI0E,EAAU1E,GAAGyD,MAAMpE,KAAKmG,eAAe5B,EAAOc,EAAU1E,GAAGuD,QAAIxE,GAAW,GAEtEuG,GACN,KAAK,EAAGZ,EAAU1E,GAAGuD,GAAG1G,KAAK6H,EAAU1E,GAAGwD,SAAU,MACpD,KAAK,EAAGkB,EAAU1E,GAAGuD,GAAG1G,KAAK6H,EAAU1E,GAAGwD,QAASwB,GAAK,MACxD,KAAK,EAAGN,EAAU1E,GAAGuD,GAAG1G,KAAK6H,EAAU1E,GAAGwD,QAASwB,EAAIC,GAAK,MAC5D,KAAK,EAAGP,EAAU1E,GAAGuD,GAAG1G,KAAK6H,EAAU1E,GAAGwD,QAASwB,EAAIC,EAAIC,GAAK,MAChE,QACE,IAAKG,EAAM,IAAKK,EAAI,EAAGL,EAAO,IAAIvH,MAAMwH,EAAK,GAAII,EAAIJ,EAAKI,IACxDL,EAAKK,EAAI,GAAKH,UAAUG,GAG1BhB,EAAU1E,GAAGuD,GAAGkC,MAAMf,EAAU1E,GAAGwD,QAAS6B,IAKpD,OAAO,GAYTnB,EAAavH,UAAUgJ,GAAK,SAAY/B,EAAOL,EAAIC,GACjD,OAAOE,EAAYrE,KAAMuE,EAAOL,EAAIC,GAAS,IAY/CU,EAAavH,UAAU8G,KAAO,SAAcG,EAAOL,EAAIC,GACrD,OAAOE,EAAYrE,KAAMuE,EAAOL,EAAIC,GAAS,IAa/CU,EAAavH,UAAU6I,eAAiB,SAAwB5B,EAAOL,EAAIC,EAASC,GAClF,IAAIK,EAAMV,EAASA,EAASQ,EAAQA,EAEpC,IAAKvE,KAAK0E,QAAQD,GAAM,OAAOzE,KAC/B,IAAKkE,EAEH,OADAU,EAAW5E,KAAMyE,GACVzE,KAGT,IAAIqF,EAAYrF,KAAK0E,QAAQD,GAE7B,GAAIY,EAAUnB,GAEVmB,EAAUnB,KAAOA,GACfE,IAAQiB,EAAUjB,MAClBD,GAAWkB,EAAUlB,UAAYA,GAEnCS,EAAW5E,KAAMyE,OAEd,CACL,IAAK,IAAI9D,EAAI,EAAGsE,EAAS,GAAIlF,EAASsF,EAAUtF,OAAQY,EAAIZ,EAAQY,KAEhE0E,EAAU1E,GAAGuD,KAAOA,GACnBE,IAASiB,EAAU1E,GAAGyD,MACtBD,GAAWkB,EAAU1E,GAAGwD,UAAYA,IAErCc,EAAOzD,KAAK6D,EAAU1E,IAOtBsE,EAAOlF,OAAQC,KAAK0E,QAAQD,GAAyB,IAAlBQ,EAAOlF,OAAekF,EAAO,GAAKA,EACpEL,EAAW5E,KAAMyE,GAGxB,OAAOzE,MAUT6E,EAAavH,UAAUiJ,mBAAqB,SAA4BhC,GACtE,IAAIE,EAUJ,OARIF,GACFE,EAAMV,EAASA,EAASQ,EAAQA,EAC5BvE,KAAK0E,QAAQD,IAAMG,EAAW5E,KAAMyE,KAExCzE,KAAK0E,QAAU,IAAIV,EACnBhE,KAAK2E,aAAe,GAGf3E,MAMT6E,EAAavH,UAAUkJ,IAAM3B,EAAavH,UAAU6I,eACpDtB,EAAavH,UAAU+G,YAAcQ,EAAavH,UAAUgJ,GAK5DzB,EAAa4B,SAAW1C,EAKxBc,EAAaA,aAAeA,EAM1B6B,EAAOC,QAAU9B,IC7Uf+B,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBpH,IAAjBqH,EACH,OAAOA,EAAaJ,QAGrB,IAAID,EAASE,EAAyBE,GAAY,CAGjDH,QAAS,IAOV,OAHAK,EAAoBF,GAAUtJ,KAAKkJ,EAAOC,QAASD,EAAQA,EAAOC,QAASE,GAGpEH,EAAOC,QCpBfE,EAAoBI,EAAKP,IACxB,IAAIQ,EAASR,GAAUA,EAAOS,WAC7B,IAAOT,EAAiB,QACxB,IAAM,EAEP,OADAG,EAAoBO,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRL,EAAoBO,EAAI,CAACT,EAASW,KACjC,IAAI,IAAIC,KAAOD,EACXT,EAAoBW,EAAEF,EAAYC,KAASV,EAAoBW,EAAEb,EAASY,IAC5ElK,OAAOoK,eAAed,EAASY,EAAK,CAAEG,YAAY,EAAMC,IAAKL,EAAWC,MCJ3EV,EAAoBW,EAAI,CAACI,EAAKC,IAAUxK,OAAOC,UAAUC,eAAeC,KAAKoK,EAAKC,G,yCC4ClF,QA1CW,WACT,IAAIC,EAAYC,EAAE,yBAChBC,EAAmBD,EAAE,iCAErBE,EADQH,EAAUI,IAAI,oBACFC,MAAM,sBAE5B,GAAIF,EAAYlI,OAAS,EAGvB,OAFAqI,QAAQC,IAAI,YACZD,QAAQC,IAAIJ,GAId,IAAIK,EAAQL,EAAY,GACtBM,EAAM,IAAIC,MACZD,EAAIE,OAAS,WAGXT,EAAiBlF,SAEjBsF,QAAQM,KAAK,wBAEfH,EAAII,IAAML,EAEV/J,SAASqK,iBACP,oBACA,WACEb,EAAE,cAAcc,YAAY,sBAC5Bd,EAAE,WAAWc,YAAY,mBACzBd,EAAE,YAAYjF,YAEhB,GAIF,IAAIgG,EAAU,IAAI9L,KAClB8L,EAAQ7L,QAAU,CAChBS,UAAW,QACXE,MAAO,mBAETkL,EAAQxI,OCyBV,QAlEiB,CAEfyI,QAAS,SAASxE,GAChBA,EAAMyE,iBACN,IAAIC,EAAWC,aAAY,WACzB,IAAIC,EAAUpB,EAAExJ,UAAU6K,YAC1BjJ,OAAOkJ,SAAS,EAAGtL,KAAKuL,IAAIvL,KAAKC,MAAgB,GAAVmL,KACvB,IAAZA,GACFI,cAAcN,KAEf,KAILO,eAAgB,SAASC,GAGvB,IAFA,IAAIC,EAAID,EAAEE,WACRC,EAAIH,EAAEI,UACAJ,EAAIA,EAAEK,cACZJ,GAAKD,EAAEE,WACPC,GAAKH,EAAEI,UAET,MAAO,CACLH,EAAGA,EACHE,EAAGA,IAKPG,aAAc,SAASC,EAAMC,GAC3B,IAAIzC,EAAI,CACN,KAAMwC,EAAKE,WAAa,EACxB,KAAMF,EAAKG,UACX,KAAMH,EAAKI,WACX,KAAMJ,EAAKK,aACX,KAAML,EAAKM,aACX,KAAMvM,KAAKC,OAAOgM,EAAKE,WAAa,GAAK,GACzCK,EAAGP,EAAKQ,mBAQV,IAAK,IAAIC,IANL,OAAOC,KAAKT,KACdA,EAAMA,EAAIzG,QACRmH,OAAOC,GACPvM,OAAO2L,EAAKa,eAAeC,OAAO,EAAIH,OAAOC,GAAG7K,UAGtCyH,EACR,IAAImD,OAAO,IAAMF,EAAI,KAAKC,KAAKT,KACjCA,EAAMA,EAAIzG,QACRmH,OAAOC,GACc,IAArBD,OAAOC,GAAG7K,OACNyH,EAAEiD,IACD,KAAOjD,EAAEiD,IAAIK,OAAOzM,OAAOmJ,EAAEiD,IAAI1K,UAI5C,OAAOkK,GAITc,QAAS,SAASC,EAASC,GACpBD,GACHE,sBAAsBD,GAExBD,GAAU,ICxDd,SAASrD,EAAIwD,GACX,OAAOC,iBAAiBD,GAG1B,SAASE,EAAIF,EAASvD,GACpB,IAAK,IAAIL,KAAOK,EAAK,CACnB,IAAI0D,EAAM1D,EAAIL,GACK,iBAAR+D,IACTA,GAAY,MAEdH,EAAQlM,MAAMsI,GAAO+D,EAEvB,OAAOH,EAGT,SAASI,EAAIhM,GACX,IAAIgM,EAAMhN,SAASW,cAAc,OAEjC,OADAqM,EAAIhM,UAAYA,EACTgM,EAGT,IAAIC,EACiB,oBAAZC,UACNA,QAAQnO,UAAUoO,SACjBD,QAAQnO,UAAUqO,uBAClBF,QAAQnO,UAAUsO,oBAClBH,QAAQnO,UAAUuO,mBAEtB,SAASH,EAAQP,EAASW,GACxB,IAAKN,EACH,MAAM,IAAIO,MAAM,wCAGlB,OAAOP,EAAUhO,KAAK2N,EAASW,GAGjC,SAAShJ,EAAOqI,GACVA,EAAQrI,OACVqI,EAAQrI,SAEJqI,EAAQa,YACVb,EAAQa,WAAWhJ,YAAYmI,GAKrC,SAASc,EAAcd,EAAS5K,GAC9B,OAAO9B,MAAMnB,UAAU4O,OAAO1O,KAAK2N,EAAQgB,UAAU,SAAUC,GAAS,OAAOV,EAAQU,EAAO7L,MAIhG,IAAI8L,EACI,KADJA,EAEG,UAFHA,EAGO,CACPC,MAAO,SAAU5C,GAAK,MAAQ,aAAeA,GAC7C6C,KAAM,SAAU7C,GAAK,MAAQ,YAAcA,GAC3C8C,UAAW,sBANXH,EAQK,CACLI,MAAO,YACPC,SAAU,eACVC,OAAQ,SAAUjD,GAAK,MAAQ,cAAgBA,GAC/CkD,UAAW,SAAUlD,GAAK,MAAQ,iBAAmBA,IAOrDmD,EAAwB,CAAEnD,EAAG,KAAME,EAAG,MAE1C,SAASkD,EAAkBnM,EAAG+I,GAC5B,IAAIqD,EAAYpM,EAAEwK,QAAQ4B,UACtBxN,EAAY8M,EAAUO,UAAUlD,GAEhCqD,EAAUC,SAASzN,GACrB0N,aAAaJ,EAAsBnD,IAEnCqD,EAAUzM,IAAIf,GAIlB,SAAS2N,EAAqBvM,EAAG+I,GAC/BmD,EAAsBnD,GAAKyD,YACzB,WAAc,OAAOxM,EAAEyM,SAAWzM,EAAEwK,QAAQ4B,UAAUjK,OAAOuJ,EAAUO,UAAUlD,MACjF/I,EAAE0M,SAASC,oBASf,IAAIC,EAAe,SAAsBpC,GACvCnL,KAAKmL,QAAUA,EACfnL,KAAKsF,SAAW,IAGdkI,EAAqB,CAAEC,QAAS,CAAEC,cAAc,IAEpDH,EAAajQ,UAAUqQ,KAAO,SAAeC,EAAWC,QACd,IAA7B7N,KAAKsF,SAASsI,KACvB5N,KAAKsF,SAASsI,GAAa,IAE7B5N,KAAKsF,SAASsI,GAAWpM,KAAKqM,GAC9B7N,KAAKmL,QAAQvC,iBAAiBgF,EAAWC,GAAS,IAGpDN,EAAajQ,UAAUwQ,OAAS,SAAiBF,EAAWG,GACxD,IAAIC,EAAShO,KAEfA,KAAKsF,SAASsI,GAAa5N,KAAKsF,SAASsI,GAAW1B,QAAO,SAAU2B,GACnE,SAAIE,GAAUF,IAAYE,KAG1BC,EAAO7C,QAAQ8C,oBAAoBL,EAAWC,GAAS,IAChD,OAIXN,EAAajQ,UAAU4Q,UAAY,WACjC,IAAK,IAAIhJ,KAAQlF,KAAKsF,SACpBtF,KAAK8N,OAAO5I,IAIhBsI,EAAmBC,QAAQ9F,IAAM,WAC7B,IAAIqG,EAAShO,KAEf,OAAO3C,OAAO8Q,KAAKnO,KAAKsF,UAAU8I,OAChC,SAAU7G,GAAO,OAAuC,IAAhCyG,EAAO1I,SAASiC,GAAKxH,WAIjD1C,OAAOgR,iBAAkBd,EAAajQ,UAAWkQ,GAEjD,IAAIc,EAAe,WACjBtO,KAAKuO,cAAgB,IAwCvB,SAASC,EAAYtJ,GACnB,GAAkC,mBAAvB/E,OAAOsO,YAChB,OAAO,IAAIA,YAAYvJ,GAEvB,IAAIT,EAAMlG,SAASiQ,YAAY,eAE/B,OADA/J,EAAIiK,gBAAgBxJ,GAAM,GAAO,OAAOxF,GACjC+E,EAIX,SAASkK,EACPhO,EACAiO,EACAC,EACAC,EACAC,GAKA,IAAIC,EACJ,QAJ2B,IAAtBF,IAA+BA,GAAoB,QAC3B,IAAxBC,IAAiCA,GAAsB,GAG/C,QAATH,EACFI,EAAS,CACP,gBACA,kBACA,YACA,IACA,KACA,YACG,IAAa,SAATJ,EAST,MAAM,IAAI7C,MAAM,oCARhBiD,EAAS,CACP,eACA,iBACA,aACA,IACA,OACA,UAQN,SACErO,EACAkO,EACAI,EACAH,EACAC,GAEA,IAAIG,EAAgBD,EAAI,GACpBE,EAAkBF,EAAI,GACtB7F,EAAY6F,EAAI,GAChBrF,EAAIqF,EAAI,GACRG,EAAKH,EAAI,GACTI,EAAOJ,EAAI,QACY,IAAtBH,IAA+BA,GAAoB,QAC3B,IAAxBC,IAAiCA,GAAsB,GAE5D,IAAI5D,EAAUxK,EAAEwK,QAGhBxK,EAAE2O,MAAM1F,GAAK,KAGTuB,EAAQ/B,GAAa,IACvBzI,EAAE2O,MAAM1F,GAAK,SAIXuB,EAAQ/B,GAAazI,EAAEuO,GAAiBvO,EAAEwO,GAAmB,IAC/DxO,EAAE2O,MAAM1F,GAAK,OAGXiF,IACF1D,EAAQoE,cAAcf,EAAa,aAAe5E,IAE9CiF,EAAO,EACT1D,EAAQoE,cAAcf,EAAa,aAAeY,IACzCP,EAAO,GAChB1D,EAAQoE,cAAcf,EAAa,aAAea,IAGhDP,GA7KR,SAAoCnO,EAAG+I,GACrCoD,EAAkBnM,EAAG+I,GACrBwD,EAAqBvM,EAAG+I,GA4KpB8F,CAA2B7O,EAAGiJ,IAI9BjJ,EAAE2O,MAAM1F,KAAOiF,GAAQE,IACzB5D,EAAQoE,cAAcf,EAAa,MAAQ5E,EAAI,UAAajJ,EAAE2O,MAAM1F,KAjDtE6F,CAAoB9O,EAAGkO,EAAMG,EAAQF,EAAmBC,GAqD1D,SAASW,EAAMhG,GACb,OAAOiG,SAASjG,EAAG,KAAO,EApI5B4E,EAAahR,UAAUsS,aAAe,SAAuBzE,GAC3D,IAAI3F,EAAKxF,KAAKuO,cAAcrC,QAAO,SAAU1G,GAAM,OAAOA,EAAG2F,UAAYA,KAAY,GAKrF,OAJK3F,IACHA,EAAK,IAAI+H,EAAapC,GACtBnL,KAAKuO,cAAc/M,KAAKgE,IAEnBA,GAGT8I,EAAahR,UAAUqQ,KAAO,SAAexC,EAASyC,EAAWC,GAC/D7N,KAAK4P,aAAazE,GAASwC,KAAKC,EAAWC,IAG7CS,EAAahR,UAAUwQ,OAAS,SAAiB3C,EAASyC,EAAWC,GACnE,IAAIrI,EAAKxF,KAAK4P,aAAazE,GAC3B3F,EAAGsI,OAAOF,EAAWC,GAEjBrI,EAAGiI,SAELzN,KAAKuO,cAAc3L,OAAO5C,KAAKuO,cAAc1M,QAAQ2D,GAAK,IAI9D8I,EAAahR,UAAU4Q,UAAY,WACjClO,KAAKuO,cAAcsB,SAAQ,SAAUpG,GAAK,OAAOA,EAAEyE,eACnDlO,KAAKuO,cAAgB,IAGvBD,EAAahR,UAAU8G,KAAO,SAAe+G,EAASyC,EAAWC,GAC/D,IAAIrI,EAAKxF,KAAK4P,aAAazE,GACvB2E,EAAc,SAAUrL,GAC1Be,EAAGsI,OAAOF,EAAWkC,GACrBjC,EAAQpJ,IAEVe,EAAGmI,KAAKC,EAAWkC,IAyHrB,IAAIC,EAAM,CACRC,SACsB,oBAAbzR,UACP,qBAAsBA,SAAS0R,gBAAgBhR,MACjDiR,cACoB,oBAAX/P,SACN,iBAAkBA,QAChB,mBAAoBA,OAAOgQ,WAC1BhQ,OAAOgQ,UAAUC,eAAiB,GACnCjQ,OAAOE,eAAiB9B,oBAAoB4B,OAAOE,eACxDgQ,kBACuB,oBAAdF,WAA6BA,UAAUG,iBAChDC,SACuB,oBAAdJ,WACP,UAAUzF,KAAKyF,WAAaA,UAAUK,YAG1C,SAASC,EAAe9P,GACtB,IAAIwK,EAAUxK,EAAEwK,QACZuF,EAAmB3S,KAAKC,MAAMmN,EAAQ/B,WACtCuH,EAAOxF,EAAQyF,wBAEnBjQ,EAAEkQ,eAAiB9S,KAAK+S,KAAKH,EAAKI,OAClCpQ,EAAEwO,gBAAkBpR,KAAK+S,KAAKH,EAAKK,QACnCrQ,EAAEsQ,aAAe9F,EAAQ+F,YACzBvQ,EAAEuO,cAAgB/D,EAAQgG,aAErBhG,EAAQ6B,SAASrM,EAAEyQ,kBAEtBnF,EAAcd,EAASkB,EAAYE,KAAK,MAAMsD,SAAQ,SAAUxO,GAAM,OAAOyB,EAAOzB,MAEpF8J,EAAQ3L,YAAYmB,EAAEyQ,iBAEnBjG,EAAQ6B,SAASrM,EAAE0Q,kBAEtBpF,EAAcd,EAASkB,EAAYE,KAAK,MAAMsD,SAAQ,SAAUxO,GAAM,OAAOyB,EAAOzB,MAEpF8J,EAAQ3L,YAAYmB,EAAE0Q,kBAIrB1Q,EAAE0M,SAASiE,iBACZ3Q,EAAEkQ,eAAiBlQ,EAAE0M,SAASkE,oBAAsB5Q,EAAEsQ,cAEtDtQ,EAAE6Q,kBAAmB,EACrB7Q,EAAE8Q,WAAa9Q,EAAEkQ,eAAiBlQ,EAAE+Q,iBACpC/Q,EAAEgR,WAAahR,EAAEkQ,eAAiBlQ,EAAE8Q,WACpC9Q,EAAEiR,gBAAkBC,EAClBlR,EACA+O,EAAO/O,EAAE8Q,WAAa9Q,EAAEkQ,eAAkBlQ,EAAEsQ,eAE9CtQ,EAAEmR,eAAiBpC,GACf/O,EAAEoR,yBAA2B5G,EAAQ6G,aACpCrR,EAAE8Q,WAAa9Q,EAAEiR,kBACjBjR,EAAEsQ,aAAetQ,EAAEkQ,kBAGxBlQ,EAAE6Q,kBAAmB,GAIpB7Q,EAAE0M,SAAS4E,iBACZtR,EAAEwO,gBAAkBxO,EAAE0M,SAAS6E,oBAAsBvR,EAAEuO,eAEvDvO,EAAEwR,kBAAmB,EACrBxR,EAAEyR,YAAczR,EAAEwO,gBAAkBxO,EAAE0R,kBACtC1R,EAAE2R,WAAa3R,EAAEwO,gBAAkBxO,EAAEyR,YACrCzR,EAAE4R,iBAAmBV,EACnBlR,EACA+O,EAAO/O,EAAEyR,YAAczR,EAAEwO,gBAAmBxO,EAAEuO,gBAEhDvO,EAAE6R,cAAgB9C,EACfgB,GAAoB/P,EAAEyR,YAAczR,EAAE4R,mBACpC5R,EAAEuO,cAAgBvO,EAAEwO,mBAGzBxO,EAAEwR,kBAAmB,EAGnBxR,EAAEmR,gBAAkBnR,EAAE8Q,WAAa9Q,EAAEiR,kBACvCjR,EAAEmR,eAAiBnR,EAAE8Q,WAAa9Q,EAAEiR,iBAElCjR,EAAE6R,eAAiB7R,EAAEyR,YAAczR,EAAE4R,mBACvC5R,EAAE6R,cAAgB7R,EAAEyR,YAAczR,EAAE4R,kBAiCxC,SAAmBpH,EAASxK,GAC1B,IAAI8R,EAAc,CAAE1B,MAAOpQ,EAAE8Q,YACzBf,EAAmB3S,KAAKC,MAAMmN,EAAQ/B,WAEtCzI,EAAE+R,MACJD,EAAYE,KACVhS,EAAEoR,yBACF5G,EAAQ6G,WACRrR,EAAEkQ,eACFlQ,EAAEsQ,aAEJwB,EAAYE,KAAOxH,EAAQ6G,WAEzBrR,EAAEiS,wBACJH,EAAYI,OAASlS,EAAEmS,iBAAmBpC,EAE1C+B,EAAYM,IAAMpS,EAAEqS,cAAgBtC,EAEtCrF,EAAI1K,EAAEyQ,eAAgBqB,GAEtB,IAAIQ,EAAc,CAAEF,IAAKrC,EAAkBM,OAAQrQ,EAAEyR,aACjDzR,EAAEuS,uBACAvS,EAAE+R,MACJO,EAAYE,MACVxS,EAAEsQ,cACDtQ,EAAEoR,yBAA2B5G,EAAQ6G,YACtCrR,EAAEyS,gBACFzS,EAAE0S,qBACF,EAEFJ,EAAYE,MAAQxS,EAAEyS,gBAAkBjI,EAAQ6G,WAG9CrR,EAAE+R,MACJO,EAAYN,KACVhS,EAAEoR,yBACF5G,EAAQ6G,WACW,EAAnBrR,EAAEkQ,eACFlQ,EAAEsQ,aACFtQ,EAAE2S,eACF3S,EAAE0S,qBAEJJ,EAAYN,KAAOhS,EAAE2S,eAAiBnI,EAAQ6G,WAGlD3G,EAAI1K,EAAE0Q,eAAgB4B,GAEtB5H,EAAI1K,EAAE4S,WAAY,CAChBZ,KAAMhS,EAAEmR,eACRf,MAAOpQ,EAAEiR,gBAAkBjR,EAAE6S,mBAE/BnI,EAAI1K,EAAE8S,WAAY,CAChBV,IAAKpS,EAAE6R,cACPxB,OAAQrQ,EAAE4R,iBAAmB5R,EAAE+S,mBAnFjCC,CAAUxI,EAASxK,GAEfA,EAAE6Q,iBACJrG,EAAQ4B,UAAUzM,IAAI+L,EAAUM,OAAO,OAEvCxB,EAAQ4B,UAAUjK,OAAOuJ,EAAUM,OAAO,MAC1ChM,EAAEiR,gBAAkB,EACpBjR,EAAEmR,eAAiB,EACnB3G,EAAQ6G,YAAyB,IAAZrR,EAAE+R,MAAiB/R,EAAEsQ,aAAe,GAEvDtQ,EAAEwR,iBACJhH,EAAQ4B,UAAUzM,IAAI+L,EAAUM,OAAO,OAEvCxB,EAAQ4B,UAAUjK,OAAOuJ,EAAUM,OAAO,MAC1ChM,EAAE4R,iBAAmB,EACrB5R,EAAE6R,cAAgB,EAClBrH,EAAQ/B,UAAY,GAIxB,SAASyI,EAAalR,EAAGiT,GAOvB,OANIjT,EAAE0M,SAASwG,qBACbD,EAAY7V,KAAKuL,IAAIsK,EAAWjT,EAAE0M,SAASwG,qBAEzClT,EAAE0M,SAASyG,qBACbF,EAAY7V,KAAKgW,IAAIH,EAAWjT,EAAE0M,SAASyG,qBAEtCF,EAmHT,SAASI,EACPrT,EACAsO,GAEA,IAAIE,EAAkBF,EAAI,GACtBC,EAAgBD,EAAI,GACpBgF,EAAQhF,EAAI,GACZmD,EAAcnD,EAAI,GAClBwE,EAAaxE,EAAI,GACjBsD,EAAmBtD,EAAI,GACvB7F,EAAY6F,EAAI,GAChBrF,EAAIqF,EAAI,GACRoC,EAAiBpC,EAAI,GAErB9D,EAAUxK,EAAEwK,QAEZ+I,EAAoB,KACpBC,EAAqB,KACrBC,EAAW,KAEf,SAASC,EAAiB5K,GACpBA,EAAE6K,SAAW7K,EAAE6K,QAAQ,KACzB7K,EAAEwK,GAASxK,EAAE6K,QAAQ,GAAGL,OAE1B9I,EAAQ/B,GACN8K,EAAoBE,GAAY3K,EAAEwK,GAASE,GAC7CrH,EAAkBnM,EAAGiJ,GACrB6G,EAAe9P,GAEf8I,EAAE8K,kBACF9K,EAAET,iBAGJ,SAASwL,IACPtH,EAAqBvM,EAAGiJ,GACxBjJ,EAAE0Q,GAAgBtE,UAAUjK,OAAOuJ,EAAUK,UAC7C/L,EAAE4D,MAAMuJ,OAAOnN,EAAE8T,cAAe,YAAaJ,GAG/C,SAASK,EAAUjL,EAAGkL,GACpBT,EAAoB/I,EAAQ/B,GACxBuL,GAAalL,EAAE6K,UACjB7K,EAAEwK,GAASxK,EAAE6K,QAAQ,GAAGL,OAE1BE,EAAqB1K,EAAEwK,GACvBG,GACGzT,EAAEuO,GAAiBvO,EAAEwO,KACrBxO,EAAEyR,GAAezR,EAAE4R,IACjBoC,EAKHhU,EAAE4D,MAAMoJ,KAAKhN,EAAE8T,cAAe,YAAaJ,IAJ3C1T,EAAE4D,MAAMoJ,KAAKhN,EAAE8T,cAAe,YAAaJ,GAC3C1T,EAAE4D,MAAMH,KAAKzD,EAAE8T,cAAe,UAAWD,GACzC/K,EAAET,kBAKJrI,EAAE0Q,GAAgBtE,UAAUzM,IAAI+L,EAAUK,UAE1CjD,EAAE8K,kBAGJ5T,EAAE4D,MAAMoJ,KAAKhN,EAAE8S,GAAa,aAAa,SAAUhK,GACjDiL,EAAUjL,MAEZ9I,EAAE4D,MAAMoJ,KAAKhN,EAAE8S,GAAa,cAAc,SAAUhK,GAClDiL,EAAUjL,GAAG,MAigBjB,IAeInE,EAAW,CACb,aAzoBF,SAAmB3E,GACHA,EAAEwK,QAEhBxK,EAAE4D,MAAMoJ,KAAKhN,EAAE8S,WAAY,aAAa,SAAUhK,GAAK,OAAOA,EAAE8K,qBAChE5T,EAAE4D,MAAMoJ,KAAKhN,EAAE0Q,eAAgB,aAAa,SAAU5H,GACpD,IAIImL,EAHFnL,EAAEwK,MACF9T,OAAO0U,YACPlU,EAAE0Q,eAAeT,wBAAwBmC,IACbpS,EAAE6R,cAAgB,GAAK,EAErD7R,EAAEwK,QAAQ/B,WAAawL,EAAYjU,EAAEwO,gBACrCsB,EAAe9P,GAEf8I,EAAE8K,qBAGJ5T,EAAE4D,MAAMoJ,KAAKhN,EAAE4S,WAAY,aAAa,SAAU9J,GAAK,OAAOA,EAAE8K,qBAChE5T,EAAE4D,MAAMoJ,KAAKhN,EAAEyQ,eAAgB,aAAa,SAAU3H,GACpD,IAIImL,EAHFnL,EAAEqL,MACF3U,OAAO4U,YACPpU,EAAEyQ,eAAeR,wBAAwB+B,KACZhS,EAAEmR,eAAiB,GAAK,EAEvDnR,EAAEwK,QAAQ6G,YAAc4C,EAAYjU,EAAEkQ,eACtCJ,EAAe9P,GAEf8I,EAAE8K,sBA8mBJ,aA1mBF,SAAmB5T,GACjBqT,EAAuBrT,EAAG,CACxB,iBACA,eACA,QACA,aACA,aACA,kBACA,aACA,IACA,mBACFqT,EAAuBrT,EAAG,CACxB,kBACA,gBACA,QACA,cACA,aACA,mBACA,YACA,IACA,oBAulBFqU,SA/gBF,SAAkBrU,GAChB,IAAIwK,EAAUxK,EAAEwK,QAkChBxK,EAAE4D,MAAMoJ,KAAKhN,EAAE8T,cAAe,WAAW,SAAUhL,GACjD,KACGA,EAAEwL,oBAAsBxL,EAAEwL,sBAC3BxL,EAAEyL,oBAnCoCxJ,EAAQP,EAAS,WACfO,EAAQ/K,EAAE4S,WAAY,WAAa7H,EAAQ/K,EAAE8S,WAAY,WAuCnG,CAIA,IA5WgBpS,EA4WZ8T,EAAgB5W,SAAS4W,cACzB5W,SAAS4W,cACTxU,EAAE8T,cAAcU,cACpB,GAAIA,EAAe,CACjB,GAA8B,WAA1BA,EAAcC,QAChBD,EAAgBA,EAAcE,gBAAgBF,mBAG9C,KAAOA,EAAcG,YACnBH,EAAgBA,EAAcG,WAAWH,cAG7C,GAtXFzJ,EAFgBrK,EAwXC8T,EAtXL,4BACZzJ,EAAQrK,EAAI,6BACZqK,EAAQrK,EAAI,+BACZqK,EAAQrK,EAAI,4BAoXR,OAIJ,IAAIkU,EAAS,EACTC,EAAS,EAEb,OAAQ/L,EAAEgM,OACR,KAAK,GAEDF,EADE9L,EAAEiM,SACM/U,EAAEsQ,aACHxH,EAAEkM,QACDhV,EAAEkQ,gBAEF,GAEZ,MACF,KAAK,GAED2E,EADE/L,EAAEiM,QACK/U,EAAEuO,cACFzF,EAAEkM,OACFhV,EAAEwO,gBAEF,GAEX,MACF,KAAK,GAEDoG,EADE9L,EAAEiM,QACK/U,EAAEsQ,aACFxH,EAAEkM,OACFhV,EAAEkQ,eAEF,GAEX,MACF,KAAK,GAED2E,EADE/L,EAAEiM,SACM/U,EAAEuO,cACHzF,EAAEkM,QACDhV,EAAEwO,iBAEF,GAEZ,MACF,KAAK,GAEDqG,EADE/L,EAAEmM,SACKjV,EAAEwO,iBAEDxO,EAAEwO,gBAEd,MACF,KAAK,GACHqG,EAAS7U,EAAEwO,gBACX,MACF,KAAK,GACHqG,GAAU7U,EAAEwO,gBACZ,MACF,KAAK,GACHqG,EAAS7U,EAAEuO,cACX,MACF,KAAK,GACHsG,GAAU7U,EAAEuO,cACZ,MACF,QACE,OAGAvO,EAAE0M,SAASiE,iBAA8B,IAAXiE,GAG9B5U,EAAE0M,SAAS4E,iBAA8B,IAAXuD,IAIlCrK,EAAQ/B,WAAaoM,EACrBrK,EAAQ6G,YAAcuD,EACtB9E,EAAe9P,GAlIjB,SAA8B4U,EAAQC,GACpC,IAAIpM,EAAYrL,KAAKC,MAAMmN,EAAQ/B,WACnC,GAAe,IAAXmM,EAAc,CAChB,IAAK5U,EAAEwR,iBACL,OAAO,EAET,GACiB,IAAd/I,GAAmBoM,EAAS,GAC5BpM,GAAazI,EAAEuO,cAAgBvO,EAAEwO,iBAAmBqG,EAAS,EAE9D,OAAQ7U,EAAE0M,SAASwI,iBAIvB,IAAI7D,EAAa7G,EAAQ6G,WACzB,GAAe,IAAXwD,EAAc,CAChB,IAAK7U,EAAE6Q,iBACL,OAAO,EAET,GACkB,IAAfQ,GAAoBuD,EAAS,GAC7BvD,GAAcrR,EAAEsQ,aAAetQ,EAAEkQ,gBAAkB0E,EAAS,EAE7D,OAAQ5U,EAAE0M,SAASwI,iBAGvB,OAAO,EA0GHC,CAAqBP,EAAQC,IAC/B/L,EAAET,uBAqYN+M,MAhYF,SAAepV,GACb,IAAIwK,EAAUxK,EAAEwK,QAsGhB,SAAS6K,EAAkBvM,GACzB,IAAIwF,EAhFN,SAA2BxF,GACzB,IAAI8L,EAAS9L,EAAE8L,OACXC,GAAU,EAAI/L,EAAE+L,OAoBpB,YAlBsB,IAAXD,QAA4C,IAAXC,IAE1CD,GAAW,EAAI9L,EAAEwM,YAAe,EAChCT,EAAS/L,EAAEyM,YAAc,GAGvBzM,EAAE0M,WAA6B,IAAhB1M,EAAE0M,YAEnBZ,GAAU,GACVC,GAAU,IAGRD,GAAWA,GAAUC,GAAWA,IAElCD,EAAS,EACTC,EAAS/L,EAAE2M,YAGT3M,EAAEmM,SAEG,EAAEJ,GAASD,GAEb,CAACA,EAAQC,GAsDNa,CAAkB5M,GACxB8L,EAAStG,EAAI,GACbuG,EAASvG,EAAI,GAEjB,IAvDF,SAAiClB,EAAQwH,EAAQC,GAE/C,IAAKzF,EAAIC,UAAY7E,EAAQpM,cAAc,gBACzC,OAAO,EAGT,IAAKoM,EAAQ6B,SAASe,GACpB,OAAO,EAKT,IAFA,IAAIuI,EAASvI,EAENuI,GAAUA,IAAWnL,GAAS,CACnC,GAAImL,EAAOvJ,UAAUC,SAASX,EAAYG,WACxC,OAAO,EAGT,IAAIvN,EAAQ0I,EAAI2O,GAGhB,GAAId,GAAUvW,EAAMsX,UAAUpO,MAAM,iBAAkB,CACpD,IAAIqO,EAAeF,EAAOnF,aAAemF,EAAOG,aAChD,GAAID,EAAe,IAEdF,EAAOlN,UAAY,GAAKoM,EAAS,GACjCc,EAAOlN,UAAYoN,GAAgBhB,EAAS,GAE7C,OAAO,EAKb,GAAID,GAAUtW,EAAMyX,UAAUvO,MAAM,iBAAkB,CACpD,IAAIwO,EAAgBL,EAAOpF,YAAcoF,EAAOM,YAChD,GAAID,EAAgB,IAEfL,EAAOtE,WAAa,GAAKuD,EAAS,GAClCe,EAAOtE,WAAa2E,GAAiBpB,EAAS,GAE/C,OAAO,EAKbe,EAASA,EAAOtK,WAGlB,OAAO,EAQH6K,CAAwBpN,EAAEsE,OAAQwH,EAAQC,GAA9C,CAIA,IAAIsB,GAAgB,EACfnW,EAAE0M,SAAS0J,iBAKLpW,EAAEwR,mBAAqBxR,EAAE6Q,kBAG9BgE,EACFrK,EAAQ/B,WAAaoM,EAAS7U,EAAE0M,SAAS2J,WAEzC7L,EAAQ/B,WAAamM,EAAS5U,EAAE0M,SAAS2J,WAE3CF,GAAgB,GACPnW,EAAE6Q,mBAAqB7Q,EAAEwR,mBAG9BoD,EACFpK,EAAQ6G,YAAcuD,EAAS5U,EAAE0M,SAAS2J,WAE1C7L,EAAQ6G,YAAcwD,EAAS7U,EAAE0M,SAAS2J,WAE5CF,GAAgB,IAnBhB3L,EAAQ/B,WAAaoM,EAAS7U,EAAE0M,SAAS2J,WACzC7L,EAAQ6G,YAAcuD,EAAS5U,EAAE0M,SAAS2J,YAqB5CvG,EAAe9P,IAEfmW,EAAgBA,GAzIlB,SAA8BvB,EAAQC,GACpC,IAAI9E,EAAmB3S,KAAKC,MAAMmN,EAAQ/B,WACtC6N,EAA8B,IAAtB9L,EAAQ/B,UAChB8N,EACFxG,EAAmBvF,EAAQgM,eAAiBhM,EAAQgG,aAClDiG,EAAgC,IAAvBjM,EAAQ6G,WACjBqF,EACFlM,EAAQ6G,WAAa7G,EAAQmM,cAAgBnM,EAAQ+F,YAWvD,QANInT,KAAKwZ,IAAI/B,GAAUzX,KAAKwZ,IAAIhC,GAClB0B,GAASC,EAETE,GAAUC,KAGJ1W,EAAE0M,SAASwI,iBAuHEC,CAAqBP,EAAQC,MACxC/L,EAAE+N,UACtB/N,EAAE8K,kBACF9K,EAAET,wBAIwB,IAAnB7I,OAAOsX,QAChB9W,EAAE4D,MAAMoJ,KAAKxC,EAAS,QAAS6K,QACS,IAAxB7V,OAAOuX,cACvB/W,EAAE4D,MAAMoJ,KAAKxC,EAAS,aAAc6K,IA2OtC2B,MAvOF,SAAehX,GACb,GAAKoP,EAAIG,eAAkBH,EAAIM,kBAA/B,CAIA,IAAIlF,EAAUxK,EAAEwK,QAuCZyM,EAAc,GACdC,EAAY,EACZC,EAAQ,GACRC,EAAa,KAmJbhI,EAAIG,eACNvP,EAAE4D,MAAMoJ,KAAKxC,EAAS,aAAc6M,GACpCrX,EAAE4D,MAAMoJ,KAAKxC,EAAS,YAAa8M,GACnCtX,EAAE4D,MAAMoJ,KAAKxC,EAAS,WAAY+M,IACzBnI,EAAIM,oBACTlQ,OAAOgY,cACTxX,EAAE4D,MAAMoJ,KAAKxC,EAAS,cAAe6M,GACrCrX,EAAE4D,MAAMoJ,KAAKxC,EAAS,cAAe8M,GACrCtX,EAAE4D,MAAMoJ,KAAKxC,EAAS,YAAa+M,IAC1B/X,OAAOiY,iBAChBzX,EAAE4D,MAAMoJ,KAAKxC,EAAS,gBAAiB6M,GACvCrX,EAAE4D,MAAMoJ,KAAKxC,EAAS,gBAAiB8M,GACvCtX,EAAE4D,MAAMoJ,KAAKxC,EAAS,cAAe+M,KAzKzC,SAASG,EAAeC,EAAaC,GACnCpN,EAAQ/B,WAAamP,EACrBpN,EAAQ6G,YAAcsG,EAEtB7H,EAAe9P,GAQjB,SAAS6X,EAAS/O,GAChB,OAAIA,EAAEgP,cACGhP,EAAEgP,cAAc,GAGhBhP,EAIX,SAASiP,EAAajP,GACpB,QAAIA,EAAEkP,aAAiC,QAAlBlP,EAAEkP,aAAuC,IAAdlP,EAAEmP,cAG9CnP,EAAEgP,eAA4C,IAA3BhP,EAAEgP,cAAc1Y,YAIrC0J,EAAEkP,aACgB,UAAlBlP,EAAEkP,aACFlP,EAAEkP,cAAgBlP,EAAEoP,uBAOxB,SAASb,EAAWvO,GAClB,GAAKiP,EAAajP,GAAlB,CAIA,IAAIkO,EAAQa,EAAS/O,GAErBmO,EAAY9C,MAAQ6C,EAAM7C,MAC1B8C,EAAY3D,MAAQ0D,EAAM1D,MAE1B4D,GAAY,IAAIiB,MAAOC,UAEJ,OAAfhB,GACFxO,cAAcwO,IAiDlB,SAASE,EAAUxO,GACjB,GAAIiP,EAAajP,GAAI,CACnB,IAAIkO,EAAQa,EAAS/O,GAEjBuP,EAAgB,CAAElE,MAAO6C,EAAM7C,MAAOb,MAAO0D,EAAM1D,OAEnDqE,EAAcU,EAAclE,MAAQ8C,EAAY9C,MAChDyD,EAAcS,EAAc/E,MAAQ2D,EAAY3D,MAEpD,GAtDJ,SAAiClG,EAAQwH,EAAQC,GAC/C,IAAKrK,EAAQ6B,SAASe,GACpB,OAAO,EAKT,IAFA,IAAIuI,EAASvI,EAENuI,GAAUA,IAAWnL,GAAS,CACnC,GAAImL,EAAOvJ,UAAUC,SAASX,EAAYG,WACxC,OAAO,EAGT,IAAIvN,EAAQ0I,EAAI2O,GAGhB,GAAId,GAAUvW,EAAMsX,UAAUpO,MAAM,iBAAkB,CACpD,IAAIqO,EAAeF,EAAOnF,aAAemF,EAAOG,aAChD,GAAID,EAAe,IAEdF,EAAOlN,UAAY,GAAKoM,EAAS,GACjCc,EAAOlN,UAAYoN,GAAgBhB,EAAS,GAE7C,OAAO,EAKb,GAAID,GAAUtW,EAAMyX,UAAUvO,MAAM,iBAAkB,CACpD,IAAIwO,EAAgBL,EAAOpF,YAAcoF,EAAOM,YAChD,GAAID,EAAgB,IAEfL,EAAOtE,WAAa,GAAKuD,EAAS,GAClCe,EAAOtE,WAAa2E,GAAiBpB,EAAS,GAE/C,OAAO,EAKbe,EAASA,EAAOtK,WAGlB,OAAO,EAYD6K,CAAwBpN,EAAEsE,OAAQuK,EAAaC,GACjD,OAGFF,EAAeC,EAAaC,GAC5BX,EAAcoB,EAEd,IAAIC,GAAc,IAAIH,MAAOC,UAEzBG,EAAUD,EAAcpB,EACxBqB,EAAU,IACZpB,EAAMpO,EAAI4O,EAAcY,EACxBpB,EAAMlO,EAAI2O,EAAcW,EACxBrB,EAAYoB,GAxJlB,SAAuB1D,EAAQC,GAC7B,IAAIpM,EAAYrL,KAAKC,MAAMmN,EAAQ/B,WAC/B4I,EAAa7G,EAAQ6G,WACrBmH,EAAapb,KAAKwZ,IAAIhC,GACtB6D,EAAarb,KAAKwZ,IAAI/B,GAE1B,GAAI4D,EAAaD,GAGf,GACG3D,EAAS,GAAKpM,IAAczI,EAAEuO,cAAgBvO,EAAEwO,iBAChDqG,EAAS,GAAmB,IAAdpM,EAGf,OAA0B,IAAnBjJ,OAAOkZ,SAAiB7D,EAAS,GAAKzF,EAAIQ,cAE9C,GAAI4I,EAAaC,IAInB7D,EAAS,GAAKvD,IAAerR,EAAEsQ,aAAetQ,EAAEkQ,gBAChD0E,EAAS,GAAoB,IAAfvD,GAEf,OAAO,EAIX,OAAO,EAgID8E,CAAcwB,EAAaC,IAC7B9O,EAAET,kBAIR,SAASkP,IACHvX,EAAE0M,SAASiM,cACb/P,cAAcwO,GACdA,EAAa7O,aAAY,WACnBvI,EAAE4Y,cACJhQ,cAAcwO,GAIXD,EAAMpO,GAAMoO,EAAMlO,EAKnB7L,KAAKwZ,IAAIO,EAAMpO,GAAK,KAAQ3L,KAAKwZ,IAAIO,EAAMlO,GAAK,IAClDL,cAAcwO,IAIhBM,EAAyB,GAAVP,EAAMpO,EAAkB,GAAVoO,EAAMlO,GAEnCkO,EAAMpO,GAAK,GACXoO,EAAMlO,GAAK,IAZTL,cAAcwO,KAaf,QA4CLyB,EAAmB,SAA0BrO,EAASsO,GACxD,IAAIzL,EAAShO,KAOb,QANsB,IAAjByZ,IAA0BA,EAAe,IAEvB,iBAAZtO,IACTA,EAAU5M,SAASQ,cAAcoM,KAG9BA,IAAYA,EAAQuO,SACvB,MAAM,IAAI3N,MAAM,0DAQlB,IAAK,IAAIxE,KALTvH,KAAKmL,QAAUA,EAEfA,EAAQ4B,UAAUzM,IAAI+L,GAEtBrM,KAAKqN,SAvCoC,CACzC/H,SAAU,CAAC,aAAc,aAAc,WAAY,QAAS,SAC5DwO,mBAAoB,KACpBD,mBAAoB,KACpBvG,mBAAoB,IACpBiE,oBAAqB,EACrBW,oBAAqB,EACrBZ,iBAAiB,EACjBW,iBAAiB,EACjBqH,aAAa,EACbvC,kBAAkB,EAClBlB,kBAAkB,EAClBmB,WAAY,GA4BIyC,EACdzZ,KAAKqN,SAAS9F,GAAOkS,EAAalS,GAGpCvH,KAAK6Q,eAAiB,KACtB7Q,KAAKmP,gBAAkB,KACvBnP,KAAKiR,aAAe,KACpBjR,KAAKkP,cAAgB,KAErB,IASMyK,EADAC,EARFnN,EAAQ,WAAc,OAAOtB,EAAQ4B,UAAUzM,IAAI+L,EAAUI,QAC7DoN,EAAO,WAAc,OAAO1O,EAAQ4B,UAAUjK,OAAOuJ,EAAUI,QAEnEzM,KAAK0S,MAAmC,QAA3B/K,EAAIwD,GAASyJ,WACP,IAAf5U,KAAK0S,OACPvH,EAAQ4B,UAAUzM,IAAI+L,GAExBrM,KAAK8Z,kBACCF,EAAqBzO,EAAQ6G,WAEjC7G,EAAQ6G,YAAc,EACtB2H,EAASxO,EAAQ6G,WAAa,EAC9B7G,EAAQ6G,WAAa4H,EACdD,GAET3Z,KAAK+R,yBAA2B/R,KAAK8Z,iBACjC3O,EAAQ+F,YAAc/F,EAAQyL,YAC9B,EACJ5W,KAAKuE,MAAQ,IAAI+J,EACjBtO,KAAKyU,cAAgBtJ,EAAQsJ,eAAiBlW,SAE9CyB,KAAKoR,eAAiB7F,EAAIc,EAAYE,KAAK,MAC3CpB,EAAQ3L,YAAYQ,KAAKoR,gBACzBpR,KAAKuT,WAAahI,EAAIc,EAAYC,MAAM,MACxCtM,KAAKoR,eAAe5R,YAAYQ,KAAKuT,YACrCvT,KAAKuT,WAAWzR,aAAa,WAAY,GACzC9B,KAAKuE,MAAMoJ,KAAK3N,KAAKuT,WAAY,QAAS9G,GAC1CzM,KAAKuE,MAAMoJ,KAAK3N,KAAKuT,WAAY,OAAQsG,GACzC7Z,KAAKwR,iBAAmB,KACxBxR,KAAK4R,gBAAkB,KACvB5R,KAAK8R,eAAiB,KACtB,IAAIiI,EAAapS,EAAI3H,KAAKoR,gBAC1BpR,KAAK8S,iBAAmBnD,SAASoK,EAAWlH,OAAQ,IAChDmH,MAAMha,KAAK8S,mBACb9S,KAAK4S,yBAA0B,EAC/B5S,KAAKgT,cAAgBtD,EAAMqK,EAAWhH,MAEtC/S,KAAK4S,yBAA0B,EAEjC5S,KAAKwT,iBACH9D,EAAMqK,EAAWE,iBAAmBvK,EAAMqK,EAAWG,kBAEvD7O,EAAIrL,KAAKoR,eAAgB,CAAE+I,QAAS,UACpCna,KAAK0R,iBACHhC,EAAMqK,EAAWvX,YAAckN,EAAMqK,EAAWK,aAClD/O,EAAIrL,KAAKoR,eAAgB,CAAE+I,QAAS,KACpCna,KAAKyR,WAAa,KAClBzR,KAAK2R,WAAa,KAElB3R,KAAKqR,eAAiB9F,EAAIc,EAAYE,KAAK,MAC3CpB,EAAQ3L,YAAYQ,KAAKqR,gBACzBrR,KAAKyT,WAAalI,EAAIc,EAAYC,MAAM,MACxCtM,KAAKqR,eAAe7R,YAAYQ,KAAKyT,YACrCzT,KAAKyT,WAAW3R,aAAa,WAAY,GACzC9B,KAAKuE,MAAMoJ,KAAK3N,KAAKyT,WAAY,QAAShH,GAC1CzM,KAAKuE,MAAMoJ,KAAK3N,KAAKyT,WAAY,OAAQoG,GACzC7Z,KAAKmS,iBAAmB,KACxBnS,KAAKuS,iBAAmB,KACxBvS,KAAKwS,cAAgB,KACrB,IAAI6H,EAAa1S,EAAI3H,KAAKqR,gBAC1BrR,KAAKoT,gBAAkBzD,SAAS0K,EAAWlH,MAAO,IAC9C6G,MAAMha,KAAKoT,kBACbpT,KAAKkT,wBAAyB,EAC9BlT,KAAKsT,eAAiB5D,EAAM2K,EAAW1H,OAEvC3S,KAAKkT,wBAAyB,EAEhClT,KAAKqT,qBAAuBrT,KAAK0S,MAr6BnC,SAAoBvH,GAClB,IAAImP,EAAS3S,EAAIwD,GACjB,OACEuE,EAAM4K,EAAOvJ,OACbrB,EAAM4K,EAAO3X,aACb+M,EAAM4K,EAAO7X,cACbiN,EAAM4K,EAAOL,iBACbvK,EAAM4K,EAAOJ,kBA85B0B,CAAWla,KAAKyT,YAAc,KACvEzT,KAAK0T,iBACHhE,EAAM2K,EAAWE,gBAAkB7K,EAAM2K,EAAWG,mBACtDnP,EAAIrL,KAAKqR,eAAgB,CAAE8I,QAAS,UACpCna,KAAKqS,kBACH3C,EAAM2K,EAAWI,WAAa/K,EAAM2K,EAAWK,cACjDrP,EAAIrL,KAAKqR,eAAgB,CAAE8I,QAAS,KACpCna,KAAKoS,YAAc,KACnBpS,KAAKsS,WAAa,KAElBtS,KAAKsP,MAAQ,CACX5F,EACEyB,EAAQ6G,YAAc,EAClB,QACA7G,EAAQ6G,YAAchS,KAAKiR,aAAejR,KAAK6Q,eAC/C,MACA,KACNjH,EACEuB,EAAQ/B,WAAa,EACjB,QACA+B,EAAQ/B,WAAapJ,KAAKkP,cAAgBlP,KAAKmP,gBAC/C,MACA,MAGRnP,KAAKoN,SAAU,EAEfpN,KAAKqN,SAAS/H,SAASuK,SAAQ,SAAU8K,GAAe,OAAOrV,EAASqV,GAAa3M,MAErFhO,KAAK4a,cAAgB7c,KAAKC,MAAMmN,EAAQ/B,WACxCpJ,KAAK6a,eAAiB1P,EAAQ6G,WAC9BhS,KAAKuE,MAAMoJ,KAAK3N,KAAKmL,QAAS,UAAU,SAAU1B,GAAK,OAAOuE,EAAO8M,SAASrR,MAC9EgH,EAAezQ,OAGjBwZ,EAAiBlc,UAAUyd,OAAS,WAC7B/a,KAAKoN,UAKVpN,KAAK+R,yBAA2B/R,KAAK8Z,iBACjC9Z,KAAKmL,QAAQ+F,YAAclR,KAAKmL,QAAQyL,YACxC,EAGJvL,EAAIrL,KAAKoR,eAAgB,CAAE+I,QAAS,UACpC9O,EAAIrL,KAAKqR,eAAgB,CAAE8I,QAAS,UACpCna,KAAK0R,iBACHhC,EAAM/H,EAAI3H,KAAKoR,gBAAgB5O,YAC/BkN,EAAM/H,EAAI3H,KAAKoR,gBAAgBgJ,aACjCpa,KAAKqS,kBACH3C,EAAM/H,EAAI3H,KAAKqR,gBAAgBoJ,WAC/B/K,EAAM/H,EAAI3H,KAAKqR,gBAAgBqJ,cAGjCrP,EAAIrL,KAAKoR,eAAgB,CAAE+I,QAAS,SACpC9O,EAAIrL,KAAKqR,eAAgB,CAAE8I,QAAS,SAEpC1J,EAAezQ,MAEf2O,EAAkB3O,KAAM,MAAO,GAAG,GAAO,GACzC2O,EAAkB3O,KAAM,OAAQ,GAAG,GAAO,GAE1CqL,EAAIrL,KAAKoR,eAAgB,CAAE+I,QAAS,KACpC9O,EAAIrL,KAAKqR,eAAgB,CAAE8I,QAAS,OAGtCX,EAAiBlc,UAAUwd,SAAW,SAAmBrR,GAClDzJ,KAAKoN,UAIVqD,EAAezQ,MACf2O,EAAkB3O,KAAM,MAAOA,KAAKmL,QAAQ/B,UAAYpJ,KAAK4a,eAC7DjM,EACE3O,KACA,OACAA,KAAKmL,QAAQ6G,WAAahS,KAAK6a,gBAGjC7a,KAAK4a,cAAgB7c,KAAKC,MAAMgC,KAAKmL,QAAQ/B,WAC7CpJ,KAAK6a,eAAiB7a,KAAKmL,QAAQ6G,aAGrCwH,EAAiBlc,UAAU0d,QAAU,WAC9Bhb,KAAKoN,UAIVpN,KAAKuE,MAAM2J,YACXpL,EAAO9C,KAAKuT,YACZzQ,EAAO9C,KAAKyT,YACZ3Q,EAAO9C,KAAKoR,gBACZtO,EAAO9C,KAAKqR,gBACZrR,KAAKib,kBAGLjb,KAAKmL,QAAU,KACfnL,KAAKuT,WAAa,KAClBvT,KAAKyT,WAAa,KAClBzT,KAAKoR,eAAiB,KACtBpR,KAAKqR,eAAiB,KAEtBrR,KAAKoN,SAAU,IAGjBoM,EAAiBlc,UAAU2d,gBAAkB,WAC3Cjb,KAAKmL,QAAQ5L,UAAYS,KAAKmL,QAAQ5L,UACnC2b,MAAM,KACNhP,QAAO,SAAUhH,GAAQ,OAAQA,EAAKiD,MAAM,oBAC5CgT,KAAK,MAGV,U,61BCzzCA,IAIMC,E,WAIJ,WAAYne,I,4FAAS,SACnB+C,KAAK/C,QAAL,OAAoBme,EAAQC,gBAAmBpe,GAC/C+C,KAAKsb,YAActb,KAAK/C,QAAQqe,YAChCtb,KAAKub,gBACLvb,KAAKwb,YACLxb,KAAKyb,iBACLzb,KAAK0b,mBACL1b,KAAK2b,oBACL3b,KAAK4b,4BACL5b,KAAK6b,mB,oDAGP,WACE7b,KAAK8b,SAAW/T,EAAE/H,KAAK/C,QAAQ8e,SAC/B/b,KAAKgc,MAAQjU,EAAE/H,KAAK/C,QAAQgf,MAC5Bjc,KAAKkc,QAAUnU,EAAE/H,KAAK/C,QAAQkf,QAC9Bnc,KAAKoc,YAAcrU,EAAE/H,KAAK/C,QAAQof,YAClCrc,KAAKsc,KAAOvU,EAAE/H,KAAK/C,QAAQsf,KAC3Bvc,KAAKwc,SAAWzU,EAAE/H,KAAK/C,QAAQwf,W,uBAGjC,WACEzc,KAAKgc,MAAMU,MAAK,SAAC9b,EAAO+b,GACtB5U,EAAE4U,GAAKC,KAAK,WAAYhc,Q,6BAI5B,WACEmH,EAAE,YAAY8U,SAAS,0BACvB9U,EAAE,WAAW8U,SAAS,yBACtB9U,EAAE,gBAAgB8U,SAAS,aAC3B7c,KAAKoc,YAAYS,SAAS,8BAC1B7c,KAAK8b,SAASjT,YAAY,gBAC1B7I,KAAK8b,SAASe,SAAS,oB,gCAGzB,WACE9U,EAAE,YAAYc,YAAY,0BAC1Bd,EAAE,WAAWc,YAAY,yBACzBd,EAAE,gBAAgBc,YAAY,aAC9B7I,KAAKoc,YAAYvT,YAAY,8BAC7B7I,KAAK8b,SAASjT,YAAd,oB,sBAGF,SAASiU,GACP9c,KAAK+c,UAAUD,K,wBAGjB,SAAWA,GACT,IAAK,IAAInc,EAAI,EAAGA,EAAI,EAAGA,IACjBA,IAAMmc,EACR9c,KAAKsc,KAAKzT,YAAV,8BAA6ClI,IAE7CX,KAAKsc,KAAKO,SAAV,8BAA0Clc,M,uCAKhD,WAA4B,WAC1BoH,EAAE,YAAYzB,GAAG,iBAAiB,SAAAmD,GAC3B,EAAKqS,SAASkB,SAAS,mBAC1B,EAAKlB,SAASe,SAAS,qB,0BAK7B,SAAaC,GACX,IAAK,IAAInc,EAAI,EAAGA,EAAI,EAAGA,IACjBA,IAAMmc,EACR9c,KAAKwc,SAAS3T,YAAd,iCAAoDlI,IAEpDX,KAAKwc,SAASK,SAAd,iCAAiDlc,M,uBAKvD,SAAUmc,GACR9c,KAAKid,WAAWH,GAChB9c,KAAKkd,aAAaJ,K,4BAGpB,WAAiB,WACf9c,KAAKgc,MAAMmB,OAAM,SAAA1T,GACf,IAAM2T,EAAUrV,EAAE0B,EAAEsE,QACpB,EAAKsP,SAASD,EAAQR,KAAK,kB,8BAI/B,WAAmB,WACjB5c,KAAKoc,YAAYe,OAAM,SAAA1T,GACjB,EAAKqS,SAASkB,SAAS,gBACzB,EAAKM,kBAEL,EAAKC,0B,+BAKX,WAAoB,WAClBxV,EAAE,YAAYoV,OAAM,SAAA1T,GAClB,EAAK8T,0B,8BAKT,WACa,IAAI/D,EAAiB,WAAY,CAC1ClI,iBAAiB,S,kCA/GjB8J,E,iBACoB,CACtBE,YAAa,ICGjB,QATgB,IDwHhB,ECxH4B,CAC1BS,QAAS,WACTQ,IAAK,gBACLN,KAAM,mBACNQ,QAAS,mBACTN,OAAQ,2BACRE,WAAY,yBCRd,I,glCCIMmB,E,WACJ,WAAYC,EAAUC,EAAiBC,GAAe,UACpD3d,KAAK4d,cAAgB,GACrB5d,KAAK6d,UAAW,EAChB7d,KAAK8d,SAAW,KAChB9d,KAAKyd,SAAWA,EAChBzd,KAAK0d,gBAAkB3V,EAAE2V,GAAiB,GAC1C1d,KAAK2d,cAAgB5V,EAAE4V,GAAe,GACtC3d,KAAK+d,SAAW,IAAIC,IACpBhe,KAAKie,kB,qCAGP,SAAYL,GACmB,iBAAlBA,IACT5d,KAAK4d,cAAgBA,EACrB5d,KAAKke,cACLle,KAAKme,kB,6BAIT,WAAkB,WAChBne,KAAK0d,gBAAgB9U,iBAAiB,SAAS,SAAAa,GAC7C,IAAImU,EAAgBnU,EAAEsE,OAAOrM,aAAT,eAA8B,EAAK+b,WACvD,EAAKW,YAAYR,Q,0BAIrB,SAAaS,GAAO,WAIjB,EAHere,KAAK0d,gBAAgBY,uBACnC,wBAEczO,SAAQ,SAAA0O,GAAI,OAC1BA,EAAKxR,UAAUjK,OAAO,0BAEvB,EAAI9C,KAAK0d,gBAAgBvR,UAAU0D,SAAQ,SAAA0O,GACtCA,EAAK7c,aAAL,eAA0B,EAAK+b,aAAgB,EAAKG,eACtDW,EAAKxR,UAAUzM,IAAI,4B,yBAKzB,WAAc,WACRke,EAAWxe,KAAK+d,SAASpW,IAAI3H,KAAK4d,eACtC,IACE,IAAIa,EAAUD,EAASpd,KAAI,SAAAR,GACzB,OAAO,EAAKkd,SAASld,MAEvBZ,KAAK0e,gBAAgBD,GACrB,MAAOE,GACPvW,QAAQuW,MACN,4F,6BAKN,SAAgBF,GACdrW,QAAQC,IAAIoW,GACZ,IAAIG,EAAOrgB,SAASsgB,yBACpB7e,KAAK2d,cAAcva,UAAY,GAC/B,IAAK,IAAIzC,EAAI,EAAGA,EAAI8d,EAAQ1e,OAAQY,IAClCie,EAAKpf,YAAYQ,KAAK8e,eAAeL,EAAQ9d,KAE/CX,KAAK2d,cAAcne,YAAYof,K,4BAGjC,SAAeG,GACb,IAAIC,EAAWjX,EACb,2DACEkX,eACE,IAAInG,KAAKA,KAAKoG,MAAMH,EAAS/U,OAC7B,cAEF,gBAEAmV,EAASpX,EACX,oCACEqX,SAAStiB,KACTiiB,EAASM,KACT,KACAN,EAAShd,MACT,QAGJ,OADAid,EAASM,OAAOH,GACTH,EAAS,K,qBAGlB,SAAQlB,GAAU,WAChB,IACE9d,KAAK6d,UACwC,kBAA7CxgB,OAAOC,UAAUiiB,SAAS/hB,KAAKsgB,GAFjC,CAMA,IAPgB,eAOP0B,GACP,IAAIC,EAAiB3B,EAAS0B,GAAW,EAAK/B,UAE1CgC,GAAkBA,EAAe1f,QACnC0f,EAAe5P,SAAQ,SAAA6P,GAKrB,IAAInY,EAAwB,eAAlB,EAAKkW,SAA4B,OAAS,OAChD,EAAKM,SAASja,IAAI4b,EAAcnY,IAClC,EAAKwW,SAASpW,IAAI+X,EAAcnY,IAAM/F,KAAKge,GAE3C,EAAKzB,SAAS1S,IAAIqU,EAAcnY,GAAM,CAACiY,QAbtCA,EAAY,EAAGA,EAAY1B,EAAS/d,OAAQyf,IAAa,EAAzDA,GAmBJxf,KAAK+d,SAAS4B,MACjBphB,SACG+f,uBADH,kBACqCte,KAAKyd,SAD1C,WAC4D,GACzD1Q,UAAUzM,IAFb,kBAE4BN,KAAKyd,SAFjC,kBAKFzd,KAAK8d,SAAWA,EAChB9d,KAAK6d,UAAW,O,KA6FpB,Q,WAxFE,WAAY+B,GAAU,UACpB5f,KAAK4f,SAAW,EAChB5f,KAAKsE,QAAU,IAAIub,KACnB7f,KAAK8d,SAAW,KAChB9d,KAAK8f,MAAQ,GACb9f,KAAK+f,SAAW/f,KAAK+f,SAASpS,KAAK3N,MACnCA,KAAKggB,SAAW,IAAIhC,IACpBhe,KAAKigB,aACLjgB,KAAKkgB,aACLlgB,KAAKmgB,kB,gCAIP,SAAOC,GACLpgB,KAAK4f,WACL,IAAIS,EAAU,IAAI7C,EAChB4C,EAAK3C,SACL2C,EAAK1C,gBACL0C,EAAKE,gBAEPD,EAAQE,QAAQvgB,KAAK8d,UACrB9d,KAAK8f,MAAMte,KAAK6e,K,2BAIlB,WACE,IAAK,IAAI1f,EAAI,EAAGA,EAAIX,KAAK8f,MAAM/f,OAAQY,IACrCX,KAAK8f,MAAMnf,GAAG4f,QAAQvgB,KAAK8d,Y,wBAK/B,WACE9d,KAAKsE,QAAQgC,GAAG,uBAAwBtG,KAAK+f,Y,sBAI/C,WACO/f,KAAK8d,SAAS/d,QAGnBC,KAAKwgB,kB,wBAIP,WAEE,IAAIC,EAAarB,SAAStiB,KAAO,kBAAoB4jB,OAAO,IAAI5H,MAC5D6H,EAAM,IAAIC,eACdD,EAAIE,aAAe,GACnBF,EAAIG,KAAK,MAAOL,GAAY,GAC5B,IAAIM,EAAchZ,EAAE,kBAChBiZ,EAAOhhB,KACX2gB,EAAIlY,OAAS,WAKT,IAAIwY,EACAC,EALc,MAAhBlhB,KAAKmhB,QAAkC,MAAhBnhB,KAAKmhB,QAC9BJ,EAAYje,SAKZme,EAAcG,KAAKlC,MAAMlf,KAAKqhB,eAC9BH,EAAQziB,MAAMC,QAAQuiB,GAAeA,EAAcA,EAAYC,QAClDA,EAAMnhB,SACjBihB,EAAKlD,SAAWoD,EAChBF,EAAK1c,QAAQoB,KAAK,0BAGpB1F,KAAKshB,oBAAoBxe,UAG7B6d,EAAIY,S,6BAGN,WAAkB,WAChBhjB,SAASijB,KAAK5Y,iBAAiB,SAAS,SAAAa,GACtC,GAA2B,aAAvBA,EAAEsE,OAAOxO,UAA0B,CACrCkK,EAAE8K,kBACFwH,oBACAA,WAAiB,GACjB,IAAI6B,EAAgBnU,EAAEsE,OAAOrM,aAAT,aACpB,EAAKkc,cAAgBA,EACP,EAAKkC,MAAM,GACjB1B,YAAY,EAAKR,uB,kwBCjNjC,IAAI6D,EAAa,EAOjB,IASIC,EAAmB,SAACC,EAAYF,EAAYG,GAC9C,OAAQD,EAAa,EAAIC,IAAeH,EAAa,EAAIG,IAAe,GAG1E,SAASC,EAA0BC,EAASL,EAAYE,GACtD,IAAII,EAde,SAACD,EAASH,GAC7B,IAAK,IAAIhhB,EAAI,EAAGA,EAAImhB,EAAQ/hB,OAAQY,IAClC,GAAI5C,KAAKwZ,IAAIoK,EAAaG,EAAQnhB,IAAM,IACtC,OAAOA,EAGX,OAAQ,EAQcqhB,CAAeF,EAASH,GAC9C,GAAII,GAAmB,EACrB,OAAOA,EAGT,IAAK,IAAIphB,EAAI,EAAGA,EAAImhB,EAAQ/hB,OAAQY,IAClC,GAAI+gB,EAAiBC,EAAYF,EAAYK,EAAQnhB,IAEnD,OAAIghB,EAAaF,EACR9gB,EAGAA,EAAI,EAcnB,SAASshB,EAASC,GACf,EAAIA,EAAI/V,UAAU0D,SAAQ,SAAAzD,GAP1B,EAQWA,EARF5N,iBAAiB,OAAOqR,SAAQ,SAAAsS,GAC/BA,EAmBNljB,MAAMkb,QAAU,aAVpB,EAAI+H,EAAI1jB,iBAAiB,gBAAgBqR,SAAQ,SAAAzD,GAChDA,EAAMW,UAAUjK,OAAO,iBAoB3B,SAASsf,GAAgBC,GACtB,EAAIA,EAAKlW,UAAU0D,SAAQ,SAAAzD,IAT9B,SAAkBiW,GAChBA,EAAKpjB,MAAMkb,QAAU,GASnBmI,CAASlW,MAoDb,SApCW,WACT,IAAI8V,EAAM3jB,SAASQ,cAAc,QAC7BwjB,EAAWhkB,SAASC,iBAAiB,aACzC,GAAK+jB,EAASxiB,OAAd,CAGAkiB,EAASC,GACT,IAAIM,EAAUjkB,SAASC,iBACrB,yCAGEsjB,EAnGG,EAmG6BU,GAnGfphB,KAAI,SAAAqhB,GACvB,OAAOxD,iBAA0BwD,GAAM7Y,KAmGzCrL,SAASqK,iBAAiB,UAAU,WAClC,IAAI+Y,EAAa5Z,EAAExJ,UAAU6K,YACzBsZ,EAAkBb,EACpBC,EACAL,EACAE,GAGF,GADAF,EAAaE,OACkB,IAApBe,EAAX,CAIA,IAAIC,EAAWJ,EAASG,IA1D5B,SAAmBR,GACjBD,EAASC,GA2DPU,CAAUV,GAtCd,SAAsCW,GAEpC,IADA,IAAIC,EAAWD,EACRC,GAAYA,EAAS9W,aAC1BoW,GAAgBU,EAAS9W,YACzBoW,GAAgBU,KAChBA,EAAWA,EAAS9W,YACPe,UAAUC,SAAS,WAkChC+V,CAA6BJ,GAEzBA,GACYA,EAAS5jB,cAAc,KApDpCgO,UAAUzM,IAAI,oBCtErB,IAAM0iB,GAAe,SAAAza,GACnB,IAAI0a,EAAQ1a,EAAI2a,UACZC,EAAS,aAAaC,KAAKH,IAAU,aAAaG,KAAKH,GAAO,GAC9DI,EAAS,aAAaD,KAAKH,IAAU,aAAaG,KAAKH,GAAO,IAAM,eAAeG,KAAKH,IAAU,eAAeG,KAAKH,GAAO,IAAM,GACvI1a,EAAI2a,UACF,+BACAC,EACA,yCACAE,EACA,KACAJ,EACA,QCHJ,IAAIK,GACF,sEACFlb,QAAQM,KAAK,8BAA+B4a,IAC5Clb,QAAQM,KAAK,wBAAyB4a,IACtClb,QAAQM,KAAK,+BAAgC4a,IAC7Clb,QAAQM,KAAK,uDAAwD4a,IAGrEC,ICda,WACX,IAAIC,EAAUzb,EAAE,iBACd0b,EAAcD,EAAQE,KAAK,iBAC3BC,EAAS5b,EAAE,qBACX6b,EAAY7b,EAAE,oBACd8b,EAAW9b,EAAE,mBACb+b,EAAe/b,EAAE,8BACjBgc,EAAgBJ,EAAOK,SAASjR,IAAM4Q,EAAOM,cAC7CC,EAAcnc,EAAE,sBAChBoc,EAAcD,EAAYR,KAAK,gBAC/BU,EAAerc,EAAE,kBAGnBoc,EAAY7d,GAAG,SAAS,WACtB4d,EAAYG,YAAY,wBAI1B,IAAIC,EAAiB,EACnBC,EAAiB,EAkBnB,IAAIC,GAAiB,EACjBC,GAAoB,EACxB,SAASC,EAAgBvb,GAEvB,GAAIA,EAAU4a,GACZ,GAAsB,IAAlBS,EAGF,OAFAA,EAAgB,EAChBC,GAAoB,EACb,OAIT,IAAuB,IAAnBD,EAGF,OAFAA,GAAiB,EACjBC,GAAoB,GACZ,EAGZ,OAAO,EAIT,IACIE,EAAeC,EADfC,GAAa,EAEb9c,EAAE,cAAchI,SAClB8kB,GAAa,EACbD,EAAab,EAEbY,EAAgB5c,EAAE,kBAAkBkc,cAEpCU,EAAgB5c,EAAE,cAAc,GAAGa,iBAAiB,iBAAiB,WACnE+b,EAAgB5c,EAAE,kBAAkBkc,kBAoBxC,IAAIa,GAAgB,EACpB,SAASC,EAAa3b,GACpB,IAAIob,EAAgBE,EAAgBtb,GAepC,GAbsB,IAAlBob,GACFN,EAAYrH,SAAS,aACrB+G,EAAU/G,SAAS,kBACnBgH,EAAShH,SAAS,iBAClBiH,EAAajH,SAAS,+BACM,IAAnB2H,IACTN,EAAYrb,YAAY,aACxB+a,EAAU/a,YAAY,kBACtB2a,EAAQ3a,YAAY,eACpBgb,EAAShb,YAAY,iBACrBib,EAAajb,YAAY,8BAGvBgc,EAAY,CAEd,IAAIG,GArFNT,GAqFwCnb,EArFZkb,GACP,IAEnBC,EAAiB,EACV,GACEA,GAAkB,KAE3BA,EAAiB,GACT,GAED,EA4Ea,IAAhBS,EACFxB,EAAQ3a,YAAY,gBACM,IAAjBmc,GAAuBP,GAChCjB,EAAQ3G,SAAS,eAvCvB,SAAwBzT,EAAW6b,EAAQ/V,GACzC,IACIgW,EADAC,EAAepd,EAAE5H,QAAQ6Q,SAUzBoU,GADJF,GANEA,EADE9b,EAAY2a,EACA,GAGV3a,EAAY6b,IAAW/V,EAAgBiW,GAAiB,MAGjC,EAAID,EAAc,KACf,KAAO,EAAIA,EAAc,IAAM,EAC/Dd,EAAa,GAAGnlB,MAAMomB,UAAtB,sBAAiDD,EAAjD,YA8BEE,CAAelc,EAAWwb,EAAYD,GAExCL,EAAiBlb,EACjB0b,GAAgB,EAUlB/c,EAAExJ,UAAU+H,GAAG,UANf,WACE,IAAI8C,EAAYrB,EAAExJ,UAAU6K,YACxBmc,EAAeR,EAAapX,KAAK,KAAMvE,GAC3C6V,UAAmB6F,EAAeS,MAMnC,CAAC9B,EAAaI,GAAUhU,SAAQ,SAAS2V,GACxCA,EAAIlf,GAAG,QAAS2Y,cDlHpBwG,GAGA,IAAI3F,GAAQ,IAAI4F,EAChB5F,GAAM6F,OAAO,CACXlI,SAAU,OACVC,gBAAiB,qBACjB4C,eAAgB,uBAGlBR,GAAM6F,OAAO,CACXlI,SAAU,aACVC,gBAAiB,2BACjB4C,eAAgB,6BAIlBngB,OAAOyI,iBAAiB,QAAQ,SAAUrE,GACxC6D,QAAQC,IAAI,mCACZ6Z,QJtCe,WACf,GAAI/hB,OAAOylB,WAAY,CACrB,IAAIC,EAAM1lB,OAAOylB,WAAW,sBAC5BC,EAAIxhB,YAAYyhB,GAChBA,EAAmBD,QAEnB1lB,OAAOkE,YACL,UACA,WAKEyhB,GAHE3lB,OAAO4lB,YACPxnB,SAAS0R,gBAAgB2G,aACzBrY,SAASijB,KAAK5K,aAED,IACT,CACElL,SAAS,GAEX,CACEA,SAAS,OAInB,GAIJ,SAASoa,EAAmBD,GACtBA,EAAIna,QACNtD,QAAQC,IAAI,UAKZD,QAAQC,IAAI,YIOlB2d,GD1BEznB,SAASC,iBAAiB,sBAAsBqR,QAAQmT,IACxDzkB,SAASC,iBAAiB,6BAA6BqR,QAAQmT,K","file":"main.js","sourcesContent":["/* eslint-env amd */\n/* globals module:false */\n\n// https://github.com/umdjs/umd/blob/master/templates/returnExports.js\n(function (root, factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.AnchorJS = factory();\n    root.anchors = new root.AnchorJS();\n  }\n}(this, function () {\n  'use strict';\n\n  function AnchorJS(options) {\n    this.options = options || {};\n    this.elements = [];\n\n    /**\n     * Assigns options to the internal options object, and provides defaults.\n     * @param {Object} opts - Options object\n     */\n    function _applyRemainingDefaultOptions(opts) {\n      opts.icon = Object.prototype.hasOwnProperty.call(opts, 'icon') ? opts.icon : '\\uE9CB'; // Accepts characters (and also URLs?), like  '#', '¶', '❡', or '§'.\n      opts.visible = Object.prototype.hasOwnProperty.call(opts, 'visible') ? opts.visible : 'hover'; // Also accepts 'always' & 'touch'\n      opts.placement = Object.prototype.hasOwnProperty.call(opts, 'placement') ? opts.placement : 'right'; // Also accepts 'left'\n      opts.ariaLabel = Object.prototype.hasOwnProperty.call(opts, 'ariaLabel') ? opts.ariaLabel : 'Anchor'; // Accepts any text.\n      opts.class = Object.prototype.hasOwnProperty.call(opts, 'class') ? opts.class : ''; // Accepts any class name.\n      opts.base = Object.prototype.hasOwnProperty.call(opts, 'base') ? opts.base : ''; // Accepts any base URI.\n      // Using Math.floor here will ensure the value is Number-cast and an integer.\n      opts.truncate = Object.prototype.hasOwnProperty.call(opts, 'truncate') ? Math.floor(opts.truncate) : 64; // Accepts any value that can be typecast to a number.\n      opts.titleText = Object.prototype.hasOwnProperty.call(opts, 'titleText') ? opts.titleText : ''; // Accepts any text.\n    }\n\n    _applyRemainingDefaultOptions(this.options);\n\n    /**\n     * Checks to see if this device supports touch. Uses criteria pulled from Modernizr:\n     * https://github.com/Modernizr/Modernizr/blob/da22eb27631fc4957f67607fe6042e85c0a84656/feature-detects/touchevents.js#L40\n     * @return {Boolean} - true if the current device supports touch.\n     */\n    this.isTouchDevice = function() {\n      return Boolean('ontouchstart' in window || window.TouchEvent || window.DocumentTouch && document instanceof DocumentTouch);\n    };\n\n    /**\n     * Add anchor links to page elements.\n     * @param  {String|Array|Nodelist} selector - A CSS selector for targeting the elements you wish to add anchor links\n     *                                            to. Also accepts an array or nodeList containing the relavant elements.\n     * @return {this}                           - The AnchorJS object\n     */\n    this.add = function(selector) {\n      var elements,\n          elsWithIds,\n          idList,\n          elementID,\n          i,\n          index,\n          count,\n          tidyText,\n          newTidyText,\n          anchor,\n          visibleOptionToUse,\n          hrefBase,\n          indexesToDrop = [];\n\n      // We reapply options here because somebody may have overwritten the default options object when setting options.\n      // For example, this overwrites all options but visible:\n      //\n      // anchors.options = { visible: 'always'; }\n      _applyRemainingDefaultOptions(this.options);\n\n      visibleOptionToUse = this.options.visible;\n      if (visibleOptionToUse === 'touch') {\n        visibleOptionToUse = this.isTouchDevice() ? 'always' : 'hover';\n      }\n\n      // Provide a sensible default selector, if none is given.\n      if (!selector) {\n        selector = 'h2, h3, h4, h5, h6';\n      }\n\n      elements = _getElements(selector);\n\n      if (elements.length === 0) {\n        return this;\n      }\n\n      _addBaselineStyles();\n\n      // We produce a list of existing IDs so we don't generate a duplicate.\n      elsWithIds = document.querySelectorAll('[id]');\n      idList = [].map.call(elsWithIds, function(el) {\n        return el.id;\n      });\n\n      for (i = 0; i < elements.length; i++) {\n        if (this.hasAnchorJSLink(elements[i])) {\n          indexesToDrop.push(i);\n          continue;\n        }\n\n        if (elements[i].hasAttribute('id')) {\n          elementID = elements[i].getAttribute('id');\n        } else if (elements[i].hasAttribute('data-anchor-id')) {\n          elementID = elements[i].getAttribute('data-anchor-id');\n        } else {\n          tidyText = this.urlify(elements[i].textContent);\n\n          // Compare our generated ID to existing IDs (and increment it if needed)\n          // before we add it to the page.\n          newTidyText = tidyText;\n          count = 0;\n          do {\n            if (index !== undefined) {\n              newTidyText = tidyText + '-' + count;\n            }\n\n            index = idList.indexOf(newTidyText);\n            count += 1;\n          } while (index !== -1);\n\n          index = undefined;\n          idList.push(newTidyText);\n\n          elements[i].setAttribute('id', newTidyText);\n          elementID = newTidyText;\n        }\n\n        // The following code efficiently builds this DOM structure:\n        // `<a class=\"anchorjs-link ${this.options.class}\"\n        //     aria-label=\"${this.options.ariaLabel}\"\n        //     data-anchorjs-icon=\"${this.options.icon}\"\n        //     title=\"${this.options.titleText}\"\n        //     href=\"this.options.base#${elementID}\">\n        // </a>;`\n        anchor = document.createElement('a');\n        anchor.className = 'anchorjs-link ' + this.options.class;\n        anchor.setAttribute('aria-label', this.options.ariaLabel);\n        anchor.setAttribute('data-anchorjs-icon', this.options.icon);\n        if (this.options.titleText) {\n          anchor.title = this.options.titleText;\n        }\n\n        // Adjust the href if there's a <base> tag. See https://github.com/bryanbraun/anchorjs/issues/98\n        hrefBase = document.querySelector('base') ? window.location.pathname + window.location.search : '';\n        hrefBase = this.options.base || hrefBase;\n        anchor.href = hrefBase + '#' + elementID;\n\n        if (visibleOptionToUse === 'always') {\n          anchor.style.opacity = '1';\n        }\n\n        if (this.options.icon === '\\uE9CB') {\n          anchor.style.font = '1em/1 anchorjs-icons';\n\n          // We set lineHeight = 1 here because the `anchorjs-icons` font family could otherwise affect the\n          // height of the heading. This isn't the case for icons with `placement: left`, so we restore\n          // line-height: inherit in that case, ensuring they remain positioned correctly. For more info,\n          // see https://github.com/bryanbraun/anchorjs/issues/39.\n          if (this.options.placement === 'left') {\n            anchor.style.lineHeight = 'inherit';\n          }\n        }\n\n        if (this.options.placement === 'left') {\n          anchor.style.position = 'absolute';\n          anchor.style.marginLeft = '-1em';\n          anchor.style.paddingRight = '.5em';\n          elements[i].insertBefore(anchor, elements[i].firstChild);\n        } else { // if the option provided is `right` (or anything else).\n          anchor.style.paddingLeft = '.375em';\n          elements[i].appendChild(anchor);\n        }\n      }\n\n      for (i = 0; i < indexesToDrop.length; i++) {\n        elements.splice(indexesToDrop[i] - i, 1);\n      }\n\n      this.elements = this.elements.concat(elements);\n\n      return this;\n    };\n\n    /**\n     * Removes all anchorjs-links from elements targeted by the selector.\n     * @param  {String|Array|Nodelist} selector - A CSS selector string targeting elements with anchor links,\n     *                                            OR a nodeList / array containing the DOM elements.\n     * @return {this}                           - The AnchorJS object\n     */\n    this.remove = function(selector) {\n      var index,\n          domAnchor,\n          elements = _getElements(selector);\n\n      for (var i = 0; i < elements.length; i++) {\n        domAnchor = elements[i].querySelector('.anchorjs-link');\n        if (domAnchor) {\n          // Drop the element from our main list, if it's in there.\n          index = this.elements.indexOf(elements[i]);\n          if (index !== -1) {\n            this.elements.splice(index, 1);\n          }\n\n          // Remove the anchor from the DOM.\n          elements[i].removeChild(domAnchor);\n        }\n      }\n\n      return this;\n    };\n\n    /**\n     * Removes all anchorjs links. Mostly used for tests.\n     */\n    this.removeAll = function() {\n      this.remove(this.elements);\n    };\n\n    /**\n     * Urlify - Refine text so it makes a good ID.\n     *\n     * To do this, we remove apostrophes, replace non-safe characters with hyphens,\n     * remove extra hyphens, truncate, trim hyphens, and make lowercase.\n     *\n     * @param  {String} text - Any text. Usually pulled from the webpage element we are linking to.\n     * @return {String}      - hyphen-delimited text for use in IDs and URLs.\n     */\n    this.urlify = function(text) {\n      // Decode HTML characters such as '&nbsp;' first.\n      var textareaElement = document.createElement('textarea');\n      textareaElement.innerHTML = text;\n      text = textareaElement.value;\n\n      // Regex for finding the non-safe URL characters (many need escaping):\n      //   & +$,:;=?@\"#{}|^~[`%!'<>]./()*\\ (newlines, tabs, backspace, vertical tabs, and non-breaking space)\n      var nonsafeChars = /[& +$,:;=?@\"#{}|^~[`%!'<>\\]./()*\\\\\\n\\t\\b\\v\\u00A0]/g;\n\n      // The reason we include this _applyRemainingDefaultOptions is so urlify can be called independently,\n      // even after setting options. This can be useful for tests or other applications.\n      if (!this.options.truncate) {\n        _applyRemainingDefaultOptions(this.options);\n      }\n\n      // Note: we trim hyphens after truncating because truncating can cause dangling hyphens.\n      // Example string:                      // \" ⚡⚡ Don't forget: URL fragments should be i18n-friendly, hyphenated, short, and clean.\"\n      return text.trim()                      // \"⚡⚡ Don't forget: URL fragments should be i18n-friendly, hyphenated, short, and clean.\"\n        .replace(/'/gi, '')                   // \"⚡⚡ Dont forget: URL fragments should be i18n-friendly, hyphenated, short, and clean.\"\n        .replace(nonsafeChars, '-')           // \"⚡⚡-Dont-forget--URL-fragments-should-be-i18n-friendly--hyphenated--short--and-clean-\"\n        .replace(/-{2,}/g, '-')               // \"⚡⚡-Dont-forget-URL-fragments-should-be-i18n-friendly-hyphenated-short-and-clean-\"\n        .substring(0, this.options.truncate)  // \"⚡⚡-Dont-forget-URL-fragments-should-be-i18n-friendly-hyphenated-\"\n        .replace(/^-+|-+$/gm, '')             // \"⚡⚡-Dont-forget-URL-fragments-should-be-i18n-friendly-hyphenated\"\n        .toLowerCase();                       // \"⚡⚡-dont-forget-url-fragments-should-be-i18n-friendly-hyphenated\"\n    };\n\n    /**\n     * Determines if this element already has an AnchorJS link on it.\n     * Uses this technique: https://stackoverflow.com/a/5898748/1154642\n     * @param    {HTMLElement}  el - a DOM node\n     * @return   {Boolean}     true/false\n     */\n    this.hasAnchorJSLink = function(el) {\n      var hasLeftAnchor = el.firstChild && (' ' + el.firstChild.className + ' ').indexOf(' anchorjs-link ') > -1,\n          hasRightAnchor = el.lastChild && (' ' + el.lastChild.className + ' ').indexOf(' anchorjs-link ') > -1;\n\n      return hasLeftAnchor || hasRightAnchor || false;\n    };\n\n    /**\n     * Turns a selector, nodeList, or array of elements into an array of elements (so we can use array methods).\n     * It also throws errors on any other inputs. Used to handle inputs to .add and .remove.\n     * @param  {String|Array|Nodelist} input - A CSS selector string targeting elements with anchor links,\n     *                                         OR a nodeList / array containing the DOM elements.\n     * @return {Array} - An array containing the elements we want.\n     */\n    function _getElements(input) {\n      var elements;\n      if (typeof input === 'string' || input instanceof String) {\n        // See https://davidwalsh.name/nodelist-array for the technique transforming nodeList -> Array.\n        elements = [].slice.call(document.querySelectorAll(input));\n      // I checked the 'input instanceof NodeList' test in IE9 and modern browsers and it worked for me.\n      } else if (Array.isArray(input) || input instanceof NodeList) {\n        elements = [].slice.call(input);\n      } else {\n        throw new TypeError('The selector provided to AnchorJS was invalid.');\n      }\n\n      return elements;\n    }\n\n    /**\n     * _addBaselineStyles\n     * Adds baseline styles to the page, used by all AnchorJS links irregardless of configuration.\n     */\n    function _addBaselineStyles() {\n      // We don't want to add global baseline styles if they've been added before.\n      if (document.head.querySelector('style.anchorjs') !== null) {\n        return;\n      }\n\n      var style = document.createElement('style'),\n          linkRule =\n          '.anchorjs-link{'                        +\n            'opacity:0;'                           +\n            'text-decoration:none;'                +\n            '-webkit-font-smoothing:antialiased;'  +\n            '-moz-osx-font-smoothing:grayscale'    +\n          '}',\n          hoverRule =\n          ':hover>.anchorjs-link,'                 +\n          '.anchorjs-link:focus{'                  +\n            'opacity:1'                            +\n          '}',\n          anchorjsLinkFontFace =\n          '@font-face{'                            +\n            'font-family:anchorjs-icons;'          + // Icon from icomoon; 10px wide & 10px tall; 2 empty below & 4 above\n            'src:url(data:n/a;base64,AAEAAAALAIAAAwAwT1MvMg8yG2cAAAE4AAAAYGNtYXDp3gC3AAABpAAAAExnYXNwAAAAEAAAA9wAAAAIZ2x5ZlQCcfwAAAH4AAABCGhlYWQHFvHyAAAAvAAAADZoaGVhBnACFwAAAPQAAAAkaG10eASAADEAAAGYAAAADGxvY2EACACEAAAB8AAAAAhtYXhwAAYAVwAAARgAAAAgbmFtZQGOH9cAAAMAAAAAunBvc3QAAwAAAAADvAAAACAAAQAAAAEAAHzE2p9fDzz1AAkEAAAAAADRecUWAAAAANQA6R8AAAAAAoACwAAAAAgAAgAAAAAAAAABAAADwP/AAAACgAAA/9MCrQABAAAAAAAAAAAAAAAAAAAAAwABAAAAAwBVAAIAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAMCQAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAg//0DwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAAIAAAACgAAxAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADAAAAAIAAgAAgAAACDpy//9//8AAAAg6cv//f///+EWNwADAAEAAAAAAAAAAAAAAAAACACEAAEAAAAAAAAAAAAAAAAxAAACAAQARAKAAsAAKwBUAAABIiYnJjQ3NzY2MzIWFxYUBwcGIicmNDc3NjQnJiYjIgYHBwYUFxYUBwYGIwciJicmNDc3NjIXFhQHBwYUFxYWMzI2Nzc2NCcmNDc2MhcWFAcHBgYjARQGDAUtLXoWOR8fORYtLTgKGwoKCjgaGg0gEhIgDXoaGgkJBQwHdR85Fi0tOAobCgoKOBoaDSASEiANehoaCQkKGwotLXoWOR8BMwUFLYEuehYXFxYugC44CQkKGwo4GkoaDQ0NDXoaShoKGwoFBe8XFi6ALjgJCQobCjgaShoNDQ0NehpKGgobCgoKLYEuehYXAAAADACWAAEAAAAAAAEACAAAAAEAAAAAAAIAAwAIAAEAAAAAAAMACAAAAAEAAAAAAAQACAAAAAEAAAAAAAUAAQALAAEAAAAAAAYACAAAAAMAAQQJAAEAEAAMAAMAAQQJAAIABgAcAAMAAQQJAAMAEAAMAAMAAQQJAAQAEAAMAAMAAQQJAAUAAgAiAAMAAQQJAAYAEAAMYW5jaG9yanM0MDBAAGEAbgBjAGgAbwByAGoAcwA0ADAAMABAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAP) format(\"truetype\")' +\n          '}',\n          pseudoElContent =\n          '[data-anchorjs-icon]::after{'           +\n            'content:attr(data-anchorjs-icon)'     +\n          '}',\n          firstStyleEl;\n\n      style.className = 'anchorjs';\n      style.appendChild(document.createTextNode('')); // Necessary for Webkit.\n\n      // We place it in the head with the other style tags, if possible, so as to\n      // not look out of place. We insert before the others so these styles can be\n      // overridden if necessary.\n      firstStyleEl = document.head.querySelector('[rel=\"stylesheet\"],style');\n      if (firstStyleEl === undefined) {\n        document.head.appendChild(style);\n      } else {\n        document.head.insertBefore(style, firstStyleEl);\n      }\n\n      style.sheet.insertRule(linkRule, style.sheet.cssRules.length);\n      style.sheet.insertRule(hoverRule, style.sheet.cssRules.length);\n      style.sheet.insertRule(pseudoElContent, style.sheet.cssRules.length);\n      style.sheet.insertRule(anchorjsLinkFontFace, style.sheet.cssRules.length);\n    }\n  }\n\n  return AnchorJS;\n}));\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import AnchorJS from 'anchor-js'\n\nlet init = function() {\n  let $introImg = $('.site-intro-img:first'),\n    introPlaceholder = $('.site-intro-placeholder:first'),\n    bgCSS = $introImg.css('background-image'),\n    bgRegResult = bgCSS.match(/url\\(\"*([^\"]*)\"*\\)/)\n\n  if (bgRegResult.length < 2) {\n    console.log('...')\n    console.log(bgRegResult)\n    return\n  }\n\n  let bgURL = bgRegResult[1],\n    img = new Image()\n  img.onload = function() {\n    // window.alert()\n    // setTimeout(function () {\n    introPlaceholder.remove()\n    // }, 100)\n    console.info('PLACEHOLDER REMOVED')\n  }\n  img.src = bgURL\n\n  document.addEventListener(\n    'DOMContentLoaded',\n    function() {\n      $('.container').removeClass('container-unloaded')\n      $('.footer').removeClass('footer-unloaded')\n      $('.loading').remove()\n    },\n    false\n  )\n\n  // https://www.bryanbraun.com/anchorjs/\n  let anchors = new AnchorJS()\n  anchors.options = {\n    placement: 'right',\n    class: 'anchorjs-archer'\n  }\n  anchors.add()\n}\n\nexport default init\n","let archerUtil = {\n  // 回到顶部\n  backTop: function(event) {\n    event.preventDefault()\n    let topTimer = setInterval(function() {\n      let currTop = $(document).scrollTop()\n      window.scrollTo(0, Math.max(Math.floor(currTop * 0.8)))\n      if (currTop === 0) {\n        clearInterval(topTimer)\n      }\n    }, 20)\n  },\n\n  // 获取元素在页面上相对左上角的位置\n  getAbsPosition: function(e) {\n    let x = e.offsetLeft,\n      y = e.offsetTop\n    while ((e = e.offsetParent)) {\n      x += e.offsetLeft\n      y += e.offsetTop\n    }\n    return {\n      x: x,\n      y: y\n    }\n  },\n\n  // 格式化日期\n  dateFormater: function(date, fmt) {\n    let o = {\n      'M+': date.getMonth() + 1, // 月份\n      'd+': date.getDate(), // 日\n      'h+': date.getHours(), // 小时\n      'm+': date.getMinutes(), // 分\n      's+': date.getSeconds(), // 秒\n      'q+': Math.floor((date.getMonth() + 3) / 3), // 季度\n      S: date.getMilliseconds() // 毫秒\n    }\n    if (/(y+)/.test(fmt)) {\n      fmt = fmt.replace(\n        RegExp.$1,\n        String(date.getFullYear()).substr(4 - RegExp.$1.length)\n      )\n    }\n    for (let k in o) {\n      if (new RegExp('(' + k + ')').test(fmt)) {\n        fmt = fmt.replace(\n          RegExp.$1,\n          RegExp.$1.length === 1\n            ? o[k]\n            : ('00' + o[k]).substr(String(o[k]).length)\n        )\n      }\n    }\n    return fmt\n  },\n\n  // rAF的ticking\n  rafTick: function(ticking, updateFunc) {\n    if (!ticking) {\n      requestAnimationFrame(updateFunc)\n    }\n    ticking = true\n  }\n}\n\nexport default archerUtil\n","/*!\r\n * perfect-scrollbar v1.5.0\r\n * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors\r\n * Licensed under MIT\r\n */\r\n\r\nfunction get(element) {\r\n  return getComputedStyle(element);\r\n}\r\n\r\nfunction set(element, obj) {\r\n  for (var key in obj) {\r\n    var val = obj[key];\r\n    if (typeof val === 'number') {\r\n      val = val + \"px\";\r\n    }\r\n    element.style[key] = val;\r\n  }\r\n  return element;\r\n}\r\n\r\nfunction div(className) {\r\n  var div = document.createElement('div');\r\n  div.className = className;\r\n  return div;\r\n}\r\n\r\nvar elMatches =\r\n  typeof Element !== 'undefined' &&\r\n  (Element.prototype.matches ||\r\n    Element.prototype.webkitMatchesSelector ||\r\n    Element.prototype.mozMatchesSelector ||\r\n    Element.prototype.msMatchesSelector);\r\n\r\nfunction matches(element, query) {\r\n  if (!elMatches) {\r\n    throw new Error('No element matching method supported');\r\n  }\r\n\r\n  return elMatches.call(element, query);\r\n}\r\n\r\nfunction remove(element) {\r\n  if (element.remove) {\r\n    element.remove();\r\n  } else {\r\n    if (element.parentNode) {\r\n      element.parentNode.removeChild(element);\r\n    }\r\n  }\r\n}\r\n\r\nfunction queryChildren(element, selector) {\r\n  return Array.prototype.filter.call(element.children, function (child) { return matches(child, selector); }\r\n  );\r\n}\r\n\r\nvar cls = {\r\n  main: 'ps',\r\n  rtl: 'ps__rtl',\r\n  element: {\r\n    thumb: function (x) { return (\"ps__thumb-\" + x); },\r\n    rail: function (x) { return (\"ps__rail-\" + x); },\r\n    consuming: 'ps__child--consume',\r\n  },\r\n  state: {\r\n    focus: 'ps--focus',\r\n    clicking: 'ps--clicking',\r\n    active: function (x) { return (\"ps--active-\" + x); },\r\n    scrolling: function (x) { return (\"ps--scrolling-\" + x); },\r\n  },\r\n};\r\n\r\n/*\r\n * Helper methods\r\n */\r\nvar scrollingClassTimeout = { x: null, y: null };\r\n\r\nfunction addScrollingClass(i, x) {\r\n  var classList = i.element.classList;\r\n  var className = cls.state.scrolling(x);\r\n\r\n  if (classList.contains(className)) {\r\n    clearTimeout(scrollingClassTimeout[x]);\r\n  } else {\r\n    classList.add(className);\r\n  }\r\n}\r\n\r\nfunction removeScrollingClass(i, x) {\r\n  scrollingClassTimeout[x] = setTimeout(\r\n    function () { return i.isAlive && i.element.classList.remove(cls.state.scrolling(x)); },\r\n    i.settings.scrollingThreshold\r\n  );\r\n}\r\n\r\nfunction setScrollingClassInstantly(i, x) {\r\n  addScrollingClass(i, x);\r\n  removeScrollingClass(i, x);\r\n}\r\n\r\nvar EventElement = function EventElement(element) {\r\n  this.element = element;\r\n  this.handlers = {};\r\n};\r\n\r\nvar prototypeAccessors = { isEmpty: { configurable: true } };\r\n\r\nEventElement.prototype.bind = function bind (eventName, handler) {\r\n  if (typeof this.handlers[eventName] === 'undefined') {\r\n    this.handlers[eventName] = [];\r\n  }\r\n  this.handlers[eventName].push(handler);\r\n  this.element.addEventListener(eventName, handler, false);\r\n};\r\n\r\nEventElement.prototype.unbind = function unbind (eventName, target) {\r\n    var this$1 = this;\r\n\r\n  this.handlers[eventName] = this.handlers[eventName].filter(function (handler) {\r\n    if (target && handler !== target) {\r\n      return true;\r\n    }\r\n    this$1.element.removeEventListener(eventName, handler, false);\r\n    return false;\r\n  });\r\n};\r\n\r\nEventElement.prototype.unbindAll = function unbindAll () {\r\n  for (var name in this.handlers) {\r\n    this.unbind(name);\r\n  }\r\n};\r\n\r\nprototypeAccessors.isEmpty.get = function () {\r\n    var this$1 = this;\r\n\r\n  return Object.keys(this.handlers).every(\r\n    function (key) { return this$1.handlers[key].length === 0; }\r\n  );\r\n};\r\n\r\nObject.defineProperties( EventElement.prototype, prototypeAccessors );\r\n\r\nvar EventManager = function EventManager() {\r\n  this.eventElements = [];\r\n};\r\n\r\nEventManager.prototype.eventElement = function eventElement (element) {\r\n  var ee = this.eventElements.filter(function (ee) { return ee.element === element; })[0];\r\n  if (!ee) {\r\n    ee = new EventElement(element);\r\n    this.eventElements.push(ee);\r\n  }\r\n  return ee;\r\n};\r\n\r\nEventManager.prototype.bind = function bind (element, eventName, handler) {\r\n  this.eventElement(element).bind(eventName, handler);\r\n};\r\n\r\nEventManager.prototype.unbind = function unbind (element, eventName, handler) {\r\n  var ee = this.eventElement(element);\r\n  ee.unbind(eventName, handler);\r\n\r\n  if (ee.isEmpty) {\r\n    // remove\r\n    this.eventElements.splice(this.eventElements.indexOf(ee), 1);\r\n  }\r\n};\r\n\r\nEventManager.prototype.unbindAll = function unbindAll () {\r\n  this.eventElements.forEach(function (e) { return e.unbindAll(); });\r\n  this.eventElements = [];\r\n};\r\n\r\nEventManager.prototype.once = function once (element, eventName, handler) {\r\n  var ee = this.eventElement(element);\r\n  var onceHandler = function (evt) {\r\n    ee.unbind(eventName, onceHandler);\r\n    handler(evt);\r\n  };\r\n  ee.bind(eventName, onceHandler);\r\n};\r\n\r\nfunction createEvent(name) {\r\n  if (typeof window.CustomEvent === 'function') {\r\n    return new CustomEvent(name);\r\n  } else {\r\n    var evt = document.createEvent('CustomEvent');\r\n    evt.initCustomEvent(name, false, false, undefined);\r\n    return evt;\r\n  }\r\n}\r\n\r\nfunction processScrollDiff(\r\n  i,\r\n  axis,\r\n  diff,\r\n  useScrollingClass,\r\n  forceFireReachEvent\r\n) {\r\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\r\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\r\n\r\n  var fields;\r\n  if (axis === 'top') {\r\n    fields = [\r\n      'contentHeight',\r\n      'containerHeight',\r\n      'scrollTop',\r\n      'y',\r\n      'up',\r\n      'down' ];\r\n  } else if (axis === 'left') {\r\n    fields = [\r\n      'contentWidth',\r\n      'containerWidth',\r\n      'scrollLeft',\r\n      'x',\r\n      'left',\r\n      'right' ];\r\n  } else {\r\n    throw new Error('A proper axis should be provided');\r\n  }\r\n\r\n  processScrollDiff$1(i, diff, fields, useScrollingClass, forceFireReachEvent);\r\n}\r\n\r\nfunction processScrollDiff$1(\r\n  i,\r\n  diff,\r\n  ref,\r\n  useScrollingClass,\r\n  forceFireReachEvent\r\n) {\r\n  var contentHeight = ref[0];\r\n  var containerHeight = ref[1];\r\n  var scrollTop = ref[2];\r\n  var y = ref[3];\r\n  var up = ref[4];\r\n  var down = ref[5];\r\n  if ( useScrollingClass === void 0 ) useScrollingClass = true;\r\n  if ( forceFireReachEvent === void 0 ) forceFireReachEvent = false;\r\n\r\n  var element = i.element;\r\n\r\n  // reset reach\r\n  i.reach[y] = null;\r\n\r\n  // 1 for subpixel rounding\r\n  if (element[scrollTop] < 1) {\r\n    i.reach[y] = 'start';\r\n  }\r\n\r\n  // 1 for subpixel rounding\r\n  if (element[scrollTop] > i[contentHeight] - i[containerHeight] - 1) {\r\n    i.reach[y] = 'end';\r\n  }\r\n\r\n  if (diff) {\r\n    element.dispatchEvent(createEvent((\"ps-scroll-\" + y)));\r\n\r\n    if (diff < 0) {\r\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + up)));\r\n    } else if (diff > 0) {\r\n      element.dispatchEvent(createEvent((\"ps-scroll-\" + down)));\r\n    }\r\n\r\n    if (useScrollingClass) {\r\n      setScrollingClassInstantly(i, y);\r\n    }\r\n  }\r\n\r\n  if (i.reach[y] && (diff || forceFireReachEvent)) {\r\n    element.dispatchEvent(createEvent((\"ps-\" + y + \"-reach-\" + (i.reach[y]))));\r\n  }\r\n}\r\n\r\nfunction toInt(x) {\r\n  return parseInt(x, 10) || 0;\r\n}\r\n\r\nfunction isEditable(el) {\r\n  return (\r\n    matches(el, 'input,[contenteditable]') ||\r\n    matches(el, 'select,[contenteditable]') ||\r\n    matches(el, 'textarea,[contenteditable]') ||\r\n    matches(el, 'button,[contenteditable]')\r\n  );\r\n}\r\n\r\nfunction outerWidth(element) {\r\n  var styles = get(element);\r\n  return (\r\n    toInt(styles.width) +\r\n    toInt(styles.paddingLeft) +\r\n    toInt(styles.paddingRight) +\r\n    toInt(styles.borderLeftWidth) +\r\n    toInt(styles.borderRightWidth)\r\n  );\r\n}\r\n\r\nvar env = {\r\n  isWebKit:\r\n    typeof document !== 'undefined' &&\r\n    'WebkitAppearance' in document.documentElement.style,\r\n  supportsTouch:\r\n    typeof window !== 'undefined' &&\r\n    ('ontouchstart' in window ||\r\n      ('maxTouchPoints' in window.navigator &&\r\n        window.navigator.maxTouchPoints > 0) ||\r\n      (window.DocumentTouch && document instanceof window.DocumentTouch)),\r\n  supportsIePointer:\r\n    typeof navigator !== 'undefined' && navigator.msMaxTouchPoints,\r\n  isChrome:\r\n    typeof navigator !== 'undefined' &&\r\n    /Chrome/i.test(navigator && navigator.userAgent),\r\n};\r\n\r\nfunction updateGeometry(i) {\r\n  var element = i.element;\r\n  var roundedScrollTop = Math.floor(element.scrollTop);\r\n  var rect = element.getBoundingClientRect();\r\n\r\n  i.containerWidth = Math.ceil(rect.width);\r\n  i.containerHeight = Math.ceil(rect.height);\r\n  i.contentWidth = element.scrollWidth;\r\n  i.contentHeight = element.scrollHeight;\r\n\r\n  if (!element.contains(i.scrollbarXRail)) {\r\n    // clean up and append\r\n    queryChildren(element, cls.element.rail('x')).forEach(function (el) { return remove(el); }\r\n    );\r\n    element.appendChild(i.scrollbarXRail);\r\n  }\r\n  if (!element.contains(i.scrollbarYRail)) {\r\n    // clean up and append\r\n    queryChildren(element, cls.element.rail('y')).forEach(function (el) { return remove(el); }\r\n    );\r\n    element.appendChild(i.scrollbarYRail);\r\n  }\r\n\r\n  if (\r\n    !i.settings.suppressScrollX &&\r\n    i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth\r\n  ) {\r\n    i.scrollbarXActive = true;\r\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\r\n    i.railXRatio = i.containerWidth / i.railXWidth;\r\n    i.scrollbarXWidth = getThumbSize(\r\n      i,\r\n      toInt((i.railXWidth * i.containerWidth) / i.contentWidth)\r\n    );\r\n    i.scrollbarXLeft = toInt(\r\n      ((i.negativeScrollAdjustment + element.scrollLeft) *\r\n        (i.railXWidth - i.scrollbarXWidth)) /\r\n        (i.contentWidth - i.containerWidth)\r\n    );\r\n  } else {\r\n    i.scrollbarXActive = false;\r\n  }\r\n\r\n  if (\r\n    !i.settings.suppressScrollY &&\r\n    i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight\r\n  ) {\r\n    i.scrollbarYActive = true;\r\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\r\n    i.railYRatio = i.containerHeight / i.railYHeight;\r\n    i.scrollbarYHeight = getThumbSize(\r\n      i,\r\n      toInt((i.railYHeight * i.containerHeight) / i.contentHeight)\r\n    );\r\n    i.scrollbarYTop = toInt(\r\n      (roundedScrollTop * (i.railYHeight - i.scrollbarYHeight)) /\r\n        (i.contentHeight - i.containerHeight)\r\n    );\r\n  } else {\r\n    i.scrollbarYActive = false;\r\n  }\r\n\r\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\r\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\r\n  }\r\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\r\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\r\n  }\r\n\r\n  updateCss(element, i);\r\n\r\n  if (i.scrollbarXActive) {\r\n    element.classList.add(cls.state.active('x'));\r\n  } else {\r\n    element.classList.remove(cls.state.active('x'));\r\n    i.scrollbarXWidth = 0;\r\n    i.scrollbarXLeft = 0;\r\n    element.scrollLeft = i.isRtl === true ? i.contentWidth : 0;\r\n  }\r\n  if (i.scrollbarYActive) {\r\n    element.classList.add(cls.state.active('y'));\r\n  } else {\r\n    element.classList.remove(cls.state.active('y'));\r\n    i.scrollbarYHeight = 0;\r\n    i.scrollbarYTop = 0;\r\n    element.scrollTop = 0;\r\n  }\r\n}\r\n\r\nfunction getThumbSize(i, thumbSize) {\r\n  if (i.settings.minScrollbarLength) {\r\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\r\n  }\r\n  if (i.settings.maxScrollbarLength) {\r\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\r\n  }\r\n  return thumbSize;\r\n}\r\n\r\nfunction updateCss(element, i) {\r\n  var xRailOffset = { width: i.railXWidth };\r\n  var roundedScrollTop = Math.floor(element.scrollTop);\r\n\r\n  if (i.isRtl) {\r\n    xRailOffset.left =\r\n      i.negativeScrollAdjustment +\r\n      element.scrollLeft +\r\n      i.containerWidth -\r\n      i.contentWidth;\r\n  } else {\r\n    xRailOffset.left = element.scrollLeft;\r\n  }\r\n  if (i.isScrollbarXUsingBottom) {\r\n    xRailOffset.bottom = i.scrollbarXBottom - roundedScrollTop;\r\n  } else {\r\n    xRailOffset.top = i.scrollbarXTop + roundedScrollTop;\r\n  }\r\n  set(i.scrollbarXRail, xRailOffset);\r\n\r\n  var yRailOffset = { top: roundedScrollTop, height: i.railYHeight };\r\n  if (i.isScrollbarYUsingRight) {\r\n    if (i.isRtl) {\r\n      yRailOffset.right =\r\n        i.contentWidth -\r\n        (i.negativeScrollAdjustment + element.scrollLeft) -\r\n        i.scrollbarYRight -\r\n        i.scrollbarYOuterWidth -\r\n        9;\r\n    } else {\r\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\r\n    }\r\n  } else {\r\n    if (i.isRtl) {\r\n      yRailOffset.left =\r\n        i.negativeScrollAdjustment +\r\n        element.scrollLeft +\r\n        i.containerWidth * 2 -\r\n        i.contentWidth -\r\n        i.scrollbarYLeft -\r\n        i.scrollbarYOuterWidth;\r\n    } else {\r\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\r\n    }\r\n  }\r\n  set(i.scrollbarYRail, yRailOffset);\r\n\r\n  set(i.scrollbarX, {\r\n    left: i.scrollbarXLeft,\r\n    width: i.scrollbarXWidth - i.railBorderXWidth,\r\n  });\r\n  set(i.scrollbarY, {\r\n    top: i.scrollbarYTop,\r\n    height: i.scrollbarYHeight - i.railBorderYWidth,\r\n  });\r\n}\r\n\r\nfunction clickRail(i) {\r\n  var element = i.element;\r\n\r\n  i.event.bind(i.scrollbarY, 'mousedown', function (e) { return e.stopPropagation(); });\r\n  i.event.bind(i.scrollbarYRail, 'mousedown', function (e) {\r\n    var positionTop =\r\n      e.pageY -\r\n      window.pageYOffset -\r\n      i.scrollbarYRail.getBoundingClientRect().top;\r\n    var direction = positionTop > i.scrollbarYTop ? 1 : -1;\r\n\r\n    i.element.scrollTop += direction * i.containerHeight;\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n  });\r\n\r\n  i.event.bind(i.scrollbarX, 'mousedown', function (e) { return e.stopPropagation(); });\r\n  i.event.bind(i.scrollbarXRail, 'mousedown', function (e) {\r\n    var positionLeft =\r\n      e.pageX -\r\n      window.pageXOffset -\r\n      i.scrollbarXRail.getBoundingClientRect().left;\r\n    var direction = positionLeft > i.scrollbarXLeft ? 1 : -1;\r\n\r\n    i.element.scrollLeft += direction * i.containerWidth;\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n  });\r\n}\r\n\r\nfunction dragThumb(i) {\r\n  bindMouseScrollHandler(i, [\r\n    'containerWidth',\r\n    'contentWidth',\r\n    'pageX',\r\n    'railXWidth',\r\n    'scrollbarX',\r\n    'scrollbarXWidth',\r\n    'scrollLeft',\r\n    'x',\r\n    'scrollbarXRail' ]);\r\n  bindMouseScrollHandler(i, [\r\n    'containerHeight',\r\n    'contentHeight',\r\n    'pageY',\r\n    'railYHeight',\r\n    'scrollbarY',\r\n    'scrollbarYHeight',\r\n    'scrollTop',\r\n    'y',\r\n    'scrollbarYRail' ]);\r\n}\r\n\r\nfunction bindMouseScrollHandler(\r\n  i,\r\n  ref\r\n) {\r\n  var containerHeight = ref[0];\r\n  var contentHeight = ref[1];\r\n  var pageY = ref[2];\r\n  var railYHeight = ref[3];\r\n  var scrollbarY = ref[4];\r\n  var scrollbarYHeight = ref[5];\r\n  var scrollTop = ref[6];\r\n  var y = ref[7];\r\n  var scrollbarYRail = ref[8];\r\n\r\n  var element = i.element;\r\n\r\n  var startingScrollTop = null;\r\n  var startingMousePageY = null;\r\n  var scrollBy = null;\r\n\r\n  function mouseMoveHandler(e) {\r\n    if (e.touches && e.touches[0]) {\r\n      e[pageY] = e.touches[0].pageY;\r\n    }\r\n    element[scrollTop] =\r\n      startingScrollTop + scrollBy * (e[pageY] - startingMousePageY);\r\n    addScrollingClass(i, y);\r\n    updateGeometry(i);\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  function mouseUpHandler() {\r\n    removeScrollingClass(i, y);\r\n    i[scrollbarYRail].classList.remove(cls.state.clicking);\r\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\r\n  }\r\n\r\n  function bindMoves(e, touchMode) {\r\n    startingScrollTop = element[scrollTop];\r\n    if (touchMode && e.touches) {\r\n      e[pageY] = e.touches[0].pageY;\r\n    }\r\n    startingMousePageY = e[pageY];\r\n    scrollBy =\r\n      (i[contentHeight] - i[containerHeight]) /\r\n      (i[railYHeight] - i[scrollbarYHeight]);\r\n    if (!touchMode) {\r\n      i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\r\n      i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\r\n      e.preventDefault();\r\n    } else {\r\n      i.event.bind(i.ownerDocument, 'touchmove', mouseMoveHandler);\r\n    }\r\n\r\n    i[scrollbarYRail].classList.add(cls.state.clicking);\r\n\r\n    e.stopPropagation();\r\n  }\r\n\r\n  i.event.bind(i[scrollbarY], 'mousedown', function (e) {\r\n    bindMoves(e);\r\n  });\r\n  i.event.bind(i[scrollbarY], 'touchstart', function (e) {\r\n    bindMoves(e, true);\r\n  });\r\n}\r\n\r\nfunction keyboard(i) {\r\n  var element = i.element;\r\n\r\n  var elementHovered = function () { return matches(element, ':hover'); };\r\n  var scrollbarFocused = function () { return matches(i.scrollbarX, ':focus') || matches(i.scrollbarY, ':focus'); };\r\n\r\n  function shouldPreventDefault(deltaX, deltaY) {\r\n    var scrollTop = Math.floor(element.scrollTop);\r\n    if (deltaX === 0) {\r\n      if (!i.scrollbarYActive) {\r\n        return false;\r\n      }\r\n      if (\r\n        (scrollTop === 0 && deltaY > 0) ||\r\n        (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)\r\n      ) {\r\n        return !i.settings.wheelPropagation;\r\n      }\r\n    }\r\n\r\n    var scrollLeft = element.scrollLeft;\r\n    if (deltaY === 0) {\r\n      if (!i.scrollbarXActive) {\r\n        return false;\r\n      }\r\n      if (\r\n        (scrollLeft === 0 && deltaX < 0) ||\r\n        (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)\r\n      ) {\r\n        return !i.settings.wheelPropagation;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  i.event.bind(i.ownerDocument, 'keydown', function (e) {\r\n    if (\r\n      (e.isDefaultPrevented && e.isDefaultPrevented()) ||\r\n      e.defaultPrevented\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (!elementHovered() && !scrollbarFocused()) {\r\n      return;\r\n    }\r\n\r\n    var activeElement = document.activeElement\r\n      ? document.activeElement\r\n      : i.ownerDocument.activeElement;\r\n    if (activeElement) {\r\n      if (activeElement.tagName === 'IFRAME') {\r\n        activeElement = activeElement.contentDocument.activeElement;\r\n      } else {\r\n        // go deeper if element is a webcomponent\r\n        while (activeElement.shadowRoot) {\r\n          activeElement = activeElement.shadowRoot.activeElement;\r\n        }\r\n      }\r\n      if (isEditable(activeElement)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var deltaX = 0;\r\n    var deltaY = 0;\r\n\r\n    switch (e.which) {\r\n      case 37: // left\r\n        if (e.metaKey) {\r\n          deltaX = -i.contentWidth;\r\n        } else if (e.altKey) {\r\n          deltaX = -i.containerWidth;\r\n        } else {\r\n          deltaX = -30;\r\n        }\r\n        break;\r\n      case 38: // up\r\n        if (e.metaKey) {\r\n          deltaY = i.contentHeight;\r\n        } else if (e.altKey) {\r\n          deltaY = i.containerHeight;\r\n        } else {\r\n          deltaY = 30;\r\n        }\r\n        break;\r\n      case 39: // right\r\n        if (e.metaKey) {\r\n          deltaX = i.contentWidth;\r\n        } else if (e.altKey) {\r\n          deltaX = i.containerWidth;\r\n        } else {\r\n          deltaX = 30;\r\n        }\r\n        break;\r\n      case 40: // down\r\n        if (e.metaKey) {\r\n          deltaY = -i.contentHeight;\r\n        } else if (e.altKey) {\r\n          deltaY = -i.containerHeight;\r\n        } else {\r\n          deltaY = -30;\r\n        }\r\n        break;\r\n      case 32: // space bar\r\n        if (e.shiftKey) {\r\n          deltaY = i.containerHeight;\r\n        } else {\r\n          deltaY = -i.containerHeight;\r\n        }\r\n        break;\r\n      case 33: // page up\r\n        deltaY = i.containerHeight;\r\n        break;\r\n      case 34: // page down\r\n        deltaY = -i.containerHeight;\r\n        break;\r\n      case 36: // home\r\n        deltaY = i.contentHeight;\r\n        break;\r\n      case 35: // end\r\n        deltaY = -i.contentHeight;\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    if (i.settings.suppressScrollX && deltaX !== 0) {\r\n      return;\r\n    }\r\n    if (i.settings.suppressScrollY && deltaY !== 0) {\r\n      return;\r\n    }\r\n\r\n    element.scrollTop -= deltaY;\r\n    element.scrollLeft += deltaX;\r\n    updateGeometry(i);\r\n\r\n    if (shouldPreventDefault(deltaX, deltaY)) {\r\n      e.preventDefault();\r\n    }\r\n  });\r\n}\r\n\r\nfunction wheel(i) {\r\n  var element = i.element;\r\n\r\n  function shouldPreventDefault(deltaX, deltaY) {\r\n    var roundedScrollTop = Math.floor(element.scrollTop);\r\n    var isTop = element.scrollTop === 0;\r\n    var isBottom =\r\n      roundedScrollTop + element.offsetHeight === element.scrollHeight;\r\n    var isLeft = element.scrollLeft === 0;\r\n    var isRight =\r\n      element.scrollLeft + element.offsetWidth === element.scrollWidth;\r\n\r\n    var hitsBound;\r\n\r\n    // pick axis with primary direction\r\n    if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n      hitsBound = isTop || isBottom;\r\n    } else {\r\n      hitsBound = isLeft || isRight;\r\n    }\r\n\r\n    return hitsBound ? !i.settings.wheelPropagation : true;\r\n  }\r\n\r\n  function getDeltaFromEvent(e) {\r\n    var deltaX = e.deltaX;\r\n    var deltaY = -1 * e.deltaY;\r\n\r\n    if (typeof deltaX === 'undefined' || typeof deltaY === 'undefined') {\r\n      // OS X Safari\r\n      deltaX = (-1 * e.wheelDeltaX) / 6;\r\n      deltaY = e.wheelDeltaY / 6;\r\n    }\r\n\r\n    if (e.deltaMode && e.deltaMode === 1) {\r\n      // Firefox in deltaMode 1: Line scrolling\r\n      deltaX *= 10;\r\n      deltaY *= 10;\r\n    }\r\n\r\n    if (deltaX !== deltaX && deltaY !== deltaY /* NaN checks */) {\r\n      // IE in some mouse drivers\r\n      deltaX = 0;\r\n      deltaY = e.wheelDelta;\r\n    }\r\n\r\n    if (e.shiftKey) {\r\n      // reverse axis with shift key\r\n      return [-deltaY, -deltaX];\r\n    }\r\n    return [deltaX, deltaY];\r\n  }\r\n\r\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\r\n    // FIXME: this is a workaround for <select> issue in FF and IE #571\r\n    if (!env.isWebKit && element.querySelector('select:focus')) {\r\n      return true;\r\n    }\r\n\r\n    if (!element.contains(target)) {\r\n      return false;\r\n    }\r\n\r\n    var cursor = target;\r\n\r\n    while (cursor && cursor !== element) {\r\n      if (cursor.classList.contains(cls.element.consuming)) {\r\n        return true;\r\n      }\r\n\r\n      var style = get(cursor);\r\n\r\n      // if deltaY && vertical scrollable\r\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\r\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\r\n        if (maxScrollTop > 0) {\r\n          if (\r\n            (cursor.scrollTop > 0 && deltaY < 0) ||\r\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      // if deltaX && horizontal scrollable\r\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\r\n        var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\r\n        if (maxScrollLeft > 0) {\r\n          if (\r\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\r\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n\r\n      cursor = cursor.parentNode;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function mousewheelHandler(e) {\r\n    var ref = getDeltaFromEvent(e);\r\n    var deltaX = ref[0];\r\n    var deltaY = ref[1];\r\n\r\n    if (shouldBeConsumedByChild(e.target, deltaX, deltaY)) {\r\n      return;\r\n    }\r\n\r\n    var shouldPrevent = false;\r\n    if (!i.settings.useBothWheelAxes) {\r\n      // deltaX will only be used for horizontal scrolling and deltaY will\r\n      // only be used for vertical scrolling - this is the default\r\n      element.scrollTop -= deltaY * i.settings.wheelSpeed;\r\n      element.scrollLeft += deltaX * i.settings.wheelSpeed;\r\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\r\n      // only vertical scrollbar is active and useBothWheelAxes option is\r\n      // active, so let's scroll vertical bar using both mouse wheel axes\r\n      if (deltaY) {\r\n        element.scrollTop -= deltaY * i.settings.wheelSpeed;\r\n      } else {\r\n        element.scrollTop += deltaX * i.settings.wheelSpeed;\r\n      }\r\n      shouldPrevent = true;\r\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\r\n      // useBothWheelAxes and only horizontal bar is active, so use both\r\n      // wheel axes for horizontal bar\r\n      if (deltaX) {\r\n        element.scrollLeft += deltaX * i.settings.wheelSpeed;\r\n      } else {\r\n        element.scrollLeft -= deltaY * i.settings.wheelSpeed;\r\n      }\r\n      shouldPrevent = true;\r\n    }\r\n\r\n    updateGeometry(i);\r\n\r\n    shouldPrevent = shouldPrevent || shouldPreventDefault(deltaX, deltaY);\r\n    if (shouldPrevent && !e.ctrlKey) {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  if (typeof window.onwheel !== 'undefined') {\r\n    i.event.bind(element, 'wheel', mousewheelHandler);\r\n  } else if (typeof window.onmousewheel !== 'undefined') {\r\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\r\n  }\r\n}\r\n\r\nfunction touch(i) {\r\n  if (!env.supportsTouch && !env.supportsIePointer) {\r\n    return;\r\n  }\r\n\r\n  var element = i.element;\r\n\r\n  function shouldPrevent(deltaX, deltaY) {\r\n    var scrollTop = Math.floor(element.scrollTop);\r\n    var scrollLeft = element.scrollLeft;\r\n    var magnitudeX = Math.abs(deltaX);\r\n    var magnitudeY = Math.abs(deltaY);\r\n\r\n    if (magnitudeY > magnitudeX) {\r\n      // user is perhaps trying to swipe up/down the page\r\n\r\n      if (\r\n        (deltaY < 0 && scrollTop === i.contentHeight - i.containerHeight) ||\r\n        (deltaY > 0 && scrollTop === 0)\r\n      ) {\r\n        // set prevent for mobile Chrome refresh\r\n        return window.scrollY === 0 && deltaY > 0 && env.isChrome;\r\n      }\r\n    } else if (magnitudeX > magnitudeY) {\r\n      // user is perhaps trying to swipe left/right across the page\r\n\r\n      if (\r\n        (deltaX < 0 && scrollLeft === i.contentWidth - i.containerWidth) ||\r\n        (deltaX > 0 && scrollLeft === 0)\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  function applyTouchMove(differenceX, differenceY) {\r\n    element.scrollTop -= differenceY;\r\n    element.scrollLeft -= differenceX;\r\n\r\n    updateGeometry(i);\r\n  }\r\n\r\n  var startOffset = {};\r\n  var startTime = 0;\r\n  var speed = {};\r\n  var easingLoop = null;\r\n\r\n  function getTouch(e) {\r\n    if (e.targetTouches) {\r\n      return e.targetTouches[0];\r\n    } else {\r\n      // Maybe IE pointer\r\n      return e;\r\n    }\r\n  }\r\n\r\n  function shouldHandle(e) {\r\n    if (e.pointerType && e.pointerType === 'pen' && e.buttons === 0) {\r\n      return false;\r\n    }\r\n    if (e.targetTouches && e.targetTouches.length === 1) {\r\n      return true;\r\n    }\r\n    if (\r\n      e.pointerType &&\r\n      e.pointerType !== 'mouse' &&\r\n      e.pointerType !== e.MSPOINTER_TYPE_MOUSE\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function touchStart(e) {\r\n    if (!shouldHandle(e)) {\r\n      return;\r\n    }\r\n\r\n    var touch = getTouch(e);\r\n\r\n    startOffset.pageX = touch.pageX;\r\n    startOffset.pageY = touch.pageY;\r\n\r\n    startTime = new Date().getTime();\r\n\r\n    if (easingLoop !== null) {\r\n      clearInterval(easingLoop);\r\n    }\r\n  }\r\n\r\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\r\n    if (!element.contains(target)) {\r\n      return false;\r\n    }\r\n\r\n    var cursor = target;\r\n\r\n    while (cursor && cursor !== element) {\r\n      if (cursor.classList.contains(cls.element.consuming)) {\r\n        return true;\r\n      }\r\n\r\n      var style = get(cursor);\r\n\r\n      // if deltaY && vertical scrollable\r\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\r\n        var maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\r\n        if (maxScrollTop > 0) {\r\n          if (\r\n            (cursor.scrollTop > 0 && deltaY < 0) ||\r\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n      // if deltaX && horizontal scrollable\r\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\r\n        var maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\r\n        if (maxScrollLeft > 0) {\r\n          if (\r\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\r\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\r\n          ) {\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n\r\n      cursor = cursor.parentNode;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function touchMove(e) {\r\n    if (shouldHandle(e)) {\r\n      var touch = getTouch(e);\r\n\r\n      var currentOffset = { pageX: touch.pageX, pageY: touch.pageY };\r\n\r\n      var differenceX = currentOffset.pageX - startOffset.pageX;\r\n      var differenceY = currentOffset.pageY - startOffset.pageY;\r\n\r\n      if (shouldBeConsumedByChild(e.target, differenceX, differenceY)) {\r\n        return;\r\n      }\r\n\r\n      applyTouchMove(differenceX, differenceY);\r\n      startOffset = currentOffset;\r\n\r\n      var currentTime = new Date().getTime();\r\n\r\n      var timeGap = currentTime - startTime;\r\n      if (timeGap > 0) {\r\n        speed.x = differenceX / timeGap;\r\n        speed.y = differenceY / timeGap;\r\n        startTime = currentTime;\r\n      }\r\n\r\n      if (shouldPrevent(differenceX, differenceY)) {\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  }\r\n  function touchEnd() {\r\n    if (i.settings.swipeEasing) {\r\n      clearInterval(easingLoop);\r\n      easingLoop = setInterval(function() {\r\n        if (i.isInitialized) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        if (!speed.x && !speed.y) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\r\n          clearInterval(easingLoop);\r\n          return;\r\n        }\r\n\r\n        applyTouchMove(speed.x * 30, speed.y * 30);\r\n\r\n        speed.x *= 0.8;\r\n        speed.y *= 0.8;\r\n      }, 10);\r\n    }\r\n  }\r\n\r\n  if (env.supportsTouch) {\r\n    i.event.bind(element, 'touchstart', touchStart);\r\n    i.event.bind(element, 'touchmove', touchMove);\r\n    i.event.bind(element, 'touchend', touchEnd);\r\n  } else if (env.supportsIePointer) {\r\n    if (window.PointerEvent) {\r\n      i.event.bind(element, 'pointerdown', touchStart);\r\n      i.event.bind(element, 'pointermove', touchMove);\r\n      i.event.bind(element, 'pointerup', touchEnd);\r\n    } else if (window.MSPointerEvent) {\r\n      i.event.bind(element, 'MSPointerDown', touchStart);\r\n      i.event.bind(element, 'MSPointerMove', touchMove);\r\n      i.event.bind(element, 'MSPointerUp', touchEnd);\r\n    }\r\n  }\r\n}\r\n\r\nvar defaultSettings = function () { return ({\r\n  handlers: ['click-rail', 'drag-thumb', 'keyboard', 'wheel', 'touch'],\r\n  maxScrollbarLength: null,\r\n  minScrollbarLength: null,\r\n  scrollingThreshold: 1000,\r\n  scrollXMarginOffset: 0,\r\n  scrollYMarginOffset: 0,\r\n  suppressScrollX: false,\r\n  suppressScrollY: false,\r\n  swipeEasing: true,\r\n  useBothWheelAxes: false,\r\n  wheelPropagation: true,\r\n  wheelSpeed: 1,\r\n}); };\r\n\r\nvar handlers = {\r\n  'click-rail': clickRail,\r\n  'drag-thumb': dragThumb,\r\n  keyboard: keyboard,\r\n  wheel: wheel,\r\n  touch: touch,\r\n};\r\n\r\nvar PerfectScrollbar = function PerfectScrollbar(element, userSettings) {\r\n  var this$1 = this;\r\n  if ( userSettings === void 0 ) userSettings = {};\r\n\r\n  if (typeof element === 'string') {\r\n    element = document.querySelector(element);\r\n  }\r\n\r\n  if (!element || !element.nodeName) {\r\n    throw new Error('no element is specified to initialize PerfectScrollbar');\r\n  }\r\n\r\n  this.element = element;\r\n\r\n  element.classList.add(cls.main);\r\n\r\n  this.settings = defaultSettings();\r\n  for (var key in userSettings) {\r\n    this.settings[key] = userSettings[key];\r\n  }\r\n\r\n  this.containerWidth = null;\r\n  this.containerHeight = null;\r\n  this.contentWidth = null;\r\n  this.contentHeight = null;\r\n\r\n  var focus = function () { return element.classList.add(cls.state.focus); };\r\n  var blur = function () { return element.classList.remove(cls.state.focus); };\r\n\r\n  this.isRtl = get(element).direction === 'rtl';\r\n  if (this.isRtl === true) {\r\n    element.classList.add(cls.rtl);\r\n  }\r\n  this.isNegativeScroll = (function () {\r\n    var originalScrollLeft = element.scrollLeft;\r\n    var result = null;\r\n    element.scrollLeft = -1;\r\n    result = element.scrollLeft < 0;\r\n    element.scrollLeft = originalScrollLeft;\r\n    return result;\r\n  })();\r\n  this.negativeScrollAdjustment = this.isNegativeScroll\r\n    ? element.scrollWidth - element.clientWidth\r\n    : 0;\r\n  this.event = new EventManager();\r\n  this.ownerDocument = element.ownerDocument || document;\r\n\r\n  this.scrollbarXRail = div(cls.element.rail('x'));\r\n  element.appendChild(this.scrollbarXRail);\r\n  this.scrollbarX = div(cls.element.thumb('x'));\r\n  this.scrollbarXRail.appendChild(this.scrollbarX);\r\n  this.scrollbarX.setAttribute('tabindex', 0);\r\n  this.event.bind(this.scrollbarX, 'focus', focus);\r\n  this.event.bind(this.scrollbarX, 'blur', blur);\r\n  this.scrollbarXActive = null;\r\n  this.scrollbarXWidth = null;\r\n  this.scrollbarXLeft = null;\r\n  var railXStyle = get(this.scrollbarXRail);\r\n  this.scrollbarXBottom = parseInt(railXStyle.bottom, 10);\r\n  if (isNaN(this.scrollbarXBottom)) {\r\n    this.isScrollbarXUsingBottom = false;\r\n    this.scrollbarXTop = toInt(railXStyle.top);\r\n  } else {\r\n    this.isScrollbarXUsingBottom = true;\r\n  }\r\n  this.railBorderXWidth =\r\n    toInt(railXStyle.borderLeftWidth) + toInt(railXStyle.borderRightWidth);\r\n  // Set rail to display:block to calculate margins\r\n  set(this.scrollbarXRail, { display: 'block' });\r\n  this.railXMarginWidth =\r\n    toInt(railXStyle.marginLeft) + toInt(railXStyle.marginRight);\r\n  set(this.scrollbarXRail, { display: '' });\r\n  this.railXWidth = null;\r\n  this.railXRatio = null;\r\n\r\n  this.scrollbarYRail = div(cls.element.rail('y'));\r\n  element.appendChild(this.scrollbarYRail);\r\n  this.scrollbarY = div(cls.element.thumb('y'));\r\n  this.scrollbarYRail.appendChild(this.scrollbarY);\r\n  this.scrollbarY.setAttribute('tabindex', 0);\r\n  this.event.bind(this.scrollbarY, 'focus', focus);\r\n  this.event.bind(this.scrollbarY, 'blur', blur);\r\n  this.scrollbarYActive = null;\r\n  this.scrollbarYHeight = null;\r\n  this.scrollbarYTop = null;\r\n  var railYStyle = get(this.scrollbarYRail);\r\n  this.scrollbarYRight = parseInt(railYStyle.right, 10);\r\n  if (isNaN(this.scrollbarYRight)) {\r\n    this.isScrollbarYUsingRight = false;\r\n    this.scrollbarYLeft = toInt(railYStyle.left);\r\n  } else {\r\n    this.isScrollbarYUsingRight = true;\r\n  }\r\n  this.scrollbarYOuterWidth = this.isRtl ? outerWidth(this.scrollbarY) : null;\r\n  this.railBorderYWidth =\r\n    toInt(railYStyle.borderTopWidth) + toInt(railYStyle.borderBottomWidth);\r\n  set(this.scrollbarYRail, { display: 'block' });\r\n  this.railYMarginHeight =\r\n    toInt(railYStyle.marginTop) + toInt(railYStyle.marginBottom);\r\n  set(this.scrollbarYRail, { display: '' });\r\n  this.railYHeight = null;\r\n  this.railYRatio = null;\r\n\r\n  this.reach = {\r\n    x:\r\n      element.scrollLeft <= 0\r\n        ? 'start'\r\n        : element.scrollLeft >= this.contentWidth - this.containerWidth\r\n        ? 'end'\r\n        : null,\r\n    y:\r\n      element.scrollTop <= 0\r\n        ? 'start'\r\n        : element.scrollTop >= this.contentHeight - this.containerHeight\r\n        ? 'end'\r\n        : null,\r\n  };\r\n\r\n  this.isAlive = true;\r\n\r\n  this.settings.handlers.forEach(function (handlerName) { return handlers[handlerName](this$1); });\r\n\r\n  this.lastScrollTop = Math.floor(element.scrollTop); // for onScroll only\r\n  this.lastScrollLeft = element.scrollLeft; // for onScroll only\r\n  this.event.bind(this.element, 'scroll', function (e) { return this$1.onScroll(e); });\r\n  updateGeometry(this);\r\n};\r\n\r\nPerfectScrollbar.prototype.update = function update () {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  // Recalcuate negative scrollLeft adjustment\r\n  this.negativeScrollAdjustment = this.isNegativeScroll\r\n    ? this.element.scrollWidth - this.element.clientWidth\r\n    : 0;\r\n\r\n  // Recalculate rail margins\r\n  set(this.scrollbarXRail, { display: 'block' });\r\n  set(this.scrollbarYRail, { display: 'block' });\r\n  this.railXMarginWidth =\r\n    toInt(get(this.scrollbarXRail).marginLeft) +\r\n    toInt(get(this.scrollbarXRail).marginRight);\r\n  this.railYMarginHeight =\r\n    toInt(get(this.scrollbarYRail).marginTop) +\r\n    toInt(get(this.scrollbarYRail).marginBottom);\r\n\r\n  // Hide scrollbars not to affect scrollWidth and scrollHeight\r\n  set(this.scrollbarXRail, { display: 'none' });\r\n  set(this.scrollbarYRail, { display: 'none' });\r\n\r\n  updateGeometry(this);\r\n\r\n  processScrollDiff(this, 'top', 0, false, true);\r\n  processScrollDiff(this, 'left', 0, false, true);\r\n\r\n  set(this.scrollbarXRail, { display: '' });\r\n  set(this.scrollbarYRail, { display: '' });\r\n};\r\n\r\nPerfectScrollbar.prototype.onScroll = function onScroll (e) {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  updateGeometry(this);\r\n  processScrollDiff(this, 'top', this.element.scrollTop - this.lastScrollTop);\r\n  processScrollDiff(\r\n    this,\r\n    'left',\r\n    this.element.scrollLeft - this.lastScrollLeft\r\n  );\r\n\r\n  this.lastScrollTop = Math.floor(this.element.scrollTop);\r\n  this.lastScrollLeft = this.element.scrollLeft;\r\n};\r\n\r\nPerfectScrollbar.prototype.destroy = function destroy () {\r\n  if (!this.isAlive) {\r\n    return;\r\n  }\r\n\r\n  this.event.unbindAll();\r\n  remove(this.scrollbarX);\r\n  remove(this.scrollbarY);\r\n  remove(this.scrollbarXRail);\r\n  remove(this.scrollbarYRail);\r\n  this.removePsClasses();\r\n\r\n  // unset elements\r\n  this.element = null;\r\n  this.scrollbarX = null;\r\n  this.scrollbarY = null;\r\n  this.scrollbarXRail = null;\r\n  this.scrollbarYRail = null;\r\n\r\n  this.isAlive = false;\r\n};\r\n\r\nPerfectScrollbar.prototype.removePsClasses = function removePsClasses () {\r\n  this.element.className = this.element.className\r\n    .split(' ')\r\n    .filter(function (name) { return !name.match(/^ps([-_].+|)$/); })\r\n    .join(' ');\r\n};\r\n\r\nexport default PerfectScrollbar;\r\n//# sourceMappingURL=perfect-scrollbar.esm.js.map\r\n","import PerfectScrollbar from 'perfect-scrollbar'\n\nconst Selector = classPrefix => ({\n  ACTIVE: `${classPrefix}-active`\n})\n\nclass Sidebar {\n  static defaultOptions = {\n    activeIndex: 0\n  }\n  constructor(options) {\n    this.options = { ...Sidebar.defaultOptions, ...options }\n    this.activeIndex = this.options.activeIndex\n    this._initElements()\n    this._initTabs()\n    this._bindTabsClick()\n    this._bindButtonClick()\n    this._bindWrapperClick()\n    this._bindWrapperTransitionEnd()\n    this.perfectScrollbar()\n  }\n\n  _initElements() {\n    this.$sidebar = $(this.options.sidebar)\n    this.$tabs = $(this.options.tabs)\n    this.$panels = $(this.options.panels)\n    this.$menuButton = $(this.options.menuButton)\n    this.$nav = $(this.options.nav)\n    this.$content = $(this.options.content)\n  }\n\n  _initTabs() {\n    this.$tabs.each((index, tab) => {\n      $(tab).data('tabIndex', index)\n    })\n  }\n\n  activateSidebar() {\n    $('.wrapper').addClass('wrapper-sidebar-active')\n    $('.header').addClass('header-sidebar-active')\n    $('.toc-wrapper').addClass('toc-slide')\n    this.$menuButton.addClass('header-sidebar-menu-active')\n    this.$sidebar.removeClass('sidebar-hide')\n    this.$sidebar.addClass('sidebar-active')\n  }\n\n  _inactivateSidebar() {\n    $('.wrapper').removeClass('wrapper-sidebar-active')\n    $('.header').removeClass('header-sidebar-active')\n    $('.toc-wrapper').removeClass('toc-slide')\n    this.$menuButton.removeClass('header-sidebar-menu-active')\n    this.$sidebar.removeClass(`sidebar-active`)\n  }\n\n  switchTo(toIndex) {\n    this._switchTo(toIndex)\n  }\n\n  _switchTab(toIndex) {\n    for (let i = 0; i < 3; i++) {\n      if (i !== toIndex) {\n        this.$nav.removeClass(`sidebar-tabs-active-${i}`)\n      } else {\n        this.$nav.addClass(`sidebar-tabs-active-${i}`)\n      }\n    }\n  }\n\n  _bindWrapperTransitionEnd() {\n    $('.wrapper').on('transitionend', e => {\n      if (!this.$sidebar.hasClass('sidebar-active')) {\n        this.$sidebar.addClass('sidebar-hide')\n      }\n    })\n  }\n\n  _switchPanel(toIndex) {\n    for (let i = 0; i < 3; i++) {\n      if (i !== toIndex) {\n        this.$content.removeClass(`sidebar-content-active-${i}`)\n      } else {\n        this.$content.addClass(`sidebar-content-active-${i}`)\n      }\n    }\n  }\n\n  _switchTo(toIndex) {\n    this._switchTab(toIndex)\n    this._switchPanel(toIndex)\n  }\n\n  _bindTabsClick() {\n    this.$tabs.click(e => {\n      const $target = $(e.target)\n      this.switchTo($target.data('tabIndex'))\n    })\n  }\n\n  _bindButtonClick() {\n    this.$menuButton.click(e => {\n      if (this.$sidebar.hasClass('sidebar-hide')) {\n        this.activateSidebar()\n      } else {\n        this._inactivateSidebar()\n      }\n    })\n  }\n\n  _bindWrapperClick() {\n    $('.wrapper').click(e => {\n      this._inactivateSidebar()\n    })\n  }\n\n  // 阻止sidebarContent在滚动到顶部或底部时继续滚动\n  perfectScrollbar() {\n    const ps = new PerfectScrollbar('.sidebar', {\n      suppressScrollX: true\n    })\n  }\n}\n\nexport default Sidebar\n","import Sidebar from './sidebar'\n\nlet mySidebar = new Sidebar({\n  sidebar: '.sidebar',\n  nav: '.sidebar-tabs',\n  tabs: '.sidebar-tabs li',\n  content: '.sidebar-content',\n  panels: '.sideabar-contents > div',\n  menuButton: '.header-sidebar-menu'\n})\n\nexport default mySidebar\n","let initMobile = function() {\n  if (window.matchMedia) {\n    let mql = window.matchMedia('(max-width: 980px)')\n    mql.addListener(mediaChangeHandler)\n    mediaChangeHandler(mql)\n  } else {\n    window.addListener(\n      'resize',\n      function() {\n        let innerWidth =\n          window.innerWidth ||\n          document.documentElement.clientWidth ||\n          document.body.clientWidth\n        mediaChangeHandler(\n          innerWidth > 900\n            ? {\n                matches: false\n              }\n            : {\n                matches: true\n              }\n        )\n      },\n      false\n    )\n  }\n\n  function mediaChangeHandler(mql) {\n    if (mql.matches) {\n      console.log('mobile')\n      // TODO: why\n      mobilePreventScrollBreakdown()\n      // document.body.addEventListener('touchstart', function () {})\n    } else {\n      console.log('desktop')\n    }\n  }\n\n  function mobilePreventScrollBreakdown() {}\n}\n\nexport { initMobile }\n","import archerUtil from './util'\nimport sidebar from './initSidebar'\nimport Emitter from 'eventemitter3'\n\nclass MetaInfo {\n  constructor(metaName, labelsContainer, postContainer) {\n    this.currLabelName = ''\n    this.isInited = false\n    this.postsArr = null\n    this.metaName = metaName\n    this.labelsContainer = $(labelsContainer)[0]\n    this.postContainer = $(postContainer)[0]\n    this.indexMap = new Map()\n    this._bindLabelClick()\n  }\n\n  changeLabel(currLabelName) {\n    if (typeof currLabelName === 'string') {\n      this.currLabelName = currLabelName\n      this._changeList()\n      this._changeFocus()\n    }\n  }\n\n  _bindLabelClick() {\n    this.labelsContainer.addEventListener('click', e => {\n      let currLabelName = e.target.getAttribute(`data-${this.metaName}`)\n      this.changeLabel(currLabelName)\n    })\n  }\n\n  _changeFocus(label) {\n    let currFocus = this.labelsContainer.getElementsByClassName(\n      'sidebar-label-focus'\n    )\n    ;[...currFocus].forEach(item =>\n      item.classList.remove('sidebar-label-focus')\n    )\n    ;[...this.labelsContainer.children].forEach(item => {\n      if (item.getAttribute(`data-${this.metaName}`) === this.currLabelName) {\n        item.classList.add('sidebar-label-focus')\n      }\n    })\n  }\n\n  _changeList() {\n    let indexArr = this.indexMap.get(this.currLabelName)\n    try {\n      let corrArr = indexArr.map(index => {\n        return this.postsArr[index]\n      })\n      this._createPostsDom(corrArr)\n    } catch (error) {\n      console.error(\n        'Please ensure set `tags: true` and `categories: true` of the hexo-content-json config'\n      )\n    }\n  }\n\n  _createPostsDom(corrArr) {\n    console.log(corrArr)\n    let frag = document.createDocumentFragment()\n    this.postContainer.innerHTML = ''\n    for (let i = 0; i < corrArr.length; i++) {\n      frag.appendChild(this._createPostDom(corrArr[i]))\n    }\n    this.postContainer.appendChild(frag)\n  }\n\n  _createPostDom(postInfo) {\n    let $tagItem = $(\n      '<li class=\"meta-post-item\"><span class=\"meta-post-date\">' +\n        archerUtil.dateFormater(\n          new Date(Date.parse(postInfo.date)),\n          'yyyy/MM/dd'\n        ) +\n        '</span></li>'\n    )\n    let $aItem = $(\n      '<a class=\"meta-post-title\" href=\"' +\n        siteMeta.root +\n        postInfo.path +\n        '\">' +\n        postInfo.title +\n        '</a>'\n    )\n    $tagItem.append($aItem)\n    return $tagItem[0]\n  }\n\n  tryInit(postsArr) {\n    if (\n      this.isInited ||\n      Object.prototype.toString.call(postsArr) === '[object Null]'\n    ) {\n      return\n    }\n    for (let postIndex = 0; postIndex < postsArr.length; postIndex++) {\n      let currPostLabels = postsArr[postIndex][this.metaName]\n      // if there is any post has a tag\n      if (currPostLabels && currPostLabels.length) {\n        currPostLabels.forEach(tagOrCatetory => {\n\n          // if this.metaName is 'categories', tagOrCatetory['slug'] will be used as key in this.indexMap\n          // else if this.metaName is 'tag', tagOrCatetory['name'] will be used as key in this.indexMap\n          // check the array postsArr and you'll know why. (actually you can just use 'slug' in both case)\n          let key = this.metaName === 'categories' ? 'slug' : 'name';\n          if (this.indexMap.has(tagOrCatetory[key])) {\n            this.indexMap.get(tagOrCatetory[key]).push(postIndex)\n          } else {\n            this.indexMap.set(tagOrCatetory[key], [postIndex])\n          }\n        })\n      }\n    }\n\n    if (!this.indexMap.size) {\n      document\n        .getElementsByClassName(`sidebar-${this.metaName}-empty`)[0]\n        .classList.add(`sidebar-${this.metaName}-empty-active`)\n    }\n\n    this.postsArr = postsArr\n    this.isInited = true\n  }\n}\n\nclass SidebarMeta {\n  constructor(tabCount) {\n    this.tabCount = 0\n    this.emitter = new Emitter()\n    this.postsArr = null\n    this.metas = []\n    this._initMap = this._initMap.bind(this)\n    this.dataMaps = new Map()\n    this._subscribe()\n    this._fetchInfo()\n    this._bindOtherClick()\n  }\n\n  // add a new tab and updata all metas\n  addTab(para) {\n    this.tabCount++\n    let newMeta = new MetaInfo(\n      para.metaName,\n      para.labelsContainer,\n      para.postsContainer\n    )\n    newMeta.tryInit(this.postsArr)\n    this.metas.push(newMeta)\n  }\n\n  // update every MetaInfo\n  _tryInitMetas() {\n    for (let i = 0; i < this.metas.length; i++) {\n      this.metas[i].tryInit(this.postsArr)\n    }\n  }\n\n  // subscribe data onload\n  _subscribe() {\n    this.emitter.on('DATA_FETCHED_SUCCESS', this._initMap)\n  }\n\n  // init maps\n  _initMap() {\n    if (!this.postsArr.length) {\n      return\n    }\n    this._tryInitMetas()\n  }\n\n  // fetch content.json\n  _fetchInfo() {\n    // siteMeta is from js-info.ejs\n    let contentURL = siteMeta.root + 'content.json?t=' + Number(new Date())\n    let xhr = new XMLHttpRequest()\n    xhr.responseType = ''\n    xhr.open('get', contentURL, true)\n    let $loadFailed = $('.tag-load-fail')\n    let that = this\n    xhr.onload = function() {\n      if (this.status === 200 || this.status === 304) {\n        $loadFailed.remove()\n        // defensive programming if content.json formart is not correct\n        // pr: https://github.com/fi3ework/hexo-theme-archer/pull/37\n        let contentJSON\n        let posts\n        contentJSON = JSON.parse(this.responseText)\n        posts = Array.isArray(contentJSON) ? contentJSON : contentJSON.posts\n        if (posts && posts.length) {\n          that.postsArr = posts\n          that.emitter.emit('DATA_FETCHED_SUCCESS')\n        }\n      } else {\n        this.$currPostsContainer.remove()\n      }\n    }\n    xhr.send()\n  }\n\n  _bindOtherClick() {\n    document.body.addEventListener('click', e => {\n      if (e.target.className === 'post-tag') {\n        e.stopPropagation()\n        sidebar.activateSidebar()\n        sidebar.switchTo(1)\n        let currLabelName = e.target.getAttribute(`data-tags`)\n        this.currLabelName = currLabelName\n        let tagMeta = this.metas[0]\n        tagMeta.changeLabel(this.currLabelName)\n      }\n    })\n  }\n}\n\nexport default SidebarMeta\n","import archerUtil from './util'\nlet prevHeight = 0\nfunction initTocLinksScrollTop(tocLinks) {\n  return [...tocLinks].map(link => {\n    return archerUtil.getAbsPosition(link).y\n  })\n}\n\nlet calcAnchorLink = (heights, currHeight) => {\n  for (let i = 0; i < heights.length; i++) {\n    if (Math.abs(currHeight - heights[i]) < 1.1) {\n      return i\n    }\n  }\n  return -1\n}\n\nlet isPassingThrough = (currHeight, prevHeight, linkHeight) => {\n  return (currHeight + 1 - linkHeight) * (prevHeight + 1 - linkHeight) <= 0\n}\n\nfunction calcScrollIntoScreenIndex(heights, prevHeight, currHeight) {\n  let anchorLinkIndex = calcAnchorLink(heights, currHeight)\n  if (anchorLinkIndex >= 0) {\n    return anchorLinkIndex\n  }\n\n  for (let i = 0; i < heights.length; i++) {\n    if (isPassingThrough(currHeight, prevHeight, heights[i])) {\n      // if is scrolling down, select current\n      if (currHeight > prevHeight) {\n        return i\n      } else {\n        // if is scrolling up, select previous\n        return i - 1\n      }\n    }\n  }\n}\n\n// hide all ol\nfunction hideAllOl(root) {\n  ;[...root.querySelectorAll('ol')].forEach(li => {\n    hideItem(li)\n  })\n}\n\n// back to default state\nfunction initFold(toc) {\n  ;[...toc.children].forEach(child => {\n    hideAllOl(child)\n  })\n  ;[...toc.querySelectorAll('.toc-active')].forEach(child => {\n    child.classList.remove('toc-active')\n  })\n}\n\nfunction resetFold(toc) {\n  initFold(toc)\n}\n\nfunction hideItem(node) {\n  node.style.display = 'none'\n}\n\nfunction showItem(node) {\n  node.style.display = ''\n}\n\nfunction activeTocItem(node) {\n  node.classList.add('toc-active')\n}\n\nfunction showAllChildren(node) {\n  ;[...node.children].forEach(child => {\n    showItem(child)\n  })\n}\n\nfunction spreadParentNodeOfTargetItem(tocItem) {\n  let currNode = tocItem\n  while (currNode && currNode.parentNode) {\n    showAllChildren(currNode.parentNode)\n    showAllChildren(currNode)\n    currNode = currNode.parentNode\n    if (currNode.classList.contains('toc')) {\n      break\n    }\n  }\n}\n\nlet main = () => {\n  let toc = document.querySelector('.toc')\n  let tocItems = document.querySelectorAll('.toc-item')\n  if (!tocItems.length) {\n    return\n  }\n  initFold(toc)\n  let headers = document.querySelectorAll(\n    '.article-entry h1, h2, h3, h4, h5, h6'\n  )\n  // get links height\n  let heights = initTocLinksScrollTop(headers)\n  document.addEventListener('scroll', () => {\n    let currHeight = $(document).scrollTop()\n    let currHeightIndex = calcScrollIntoScreenIndex(\n      heights,\n      prevHeight,\n      currHeight\n    )\n    prevHeight = currHeight\n    if (typeof currHeightIndex === 'undefined') {\n      return\n    }\n    // spread, fold and active\n    let currItem = tocItems[currHeightIndex]\n    // 1. fold\n    resetFold(toc)\n    // 2. spread\n    spreadParentNodeOfTargetItem(currItem)\n    // 3. active\n    if (currItem) {\n      activeTocItem(currItem.querySelector('a'))\n    }\n  })\n}\n\nexport default main\n","const fancyBoxInit = img => {\n  let outer = img.outerHTML\n  let imgSrc = /src=\"(.*)\"/.exec(outer) && /src=\"(.*)\"/.exec(outer)[1]\n  let imgAlt = /alt=\"(.*)\"/.exec(outer) && /alt=\"(.*)\"/.exec(outer)[1] || /title=\"(.*)\"/.exec(outer) && /title=\"(.*)\"/.exec(outer)[1] || ''\n  img.outerHTML =\n    '<a class=\"fancy-link\" href=\"' +\n    imgSrc +\n    '\" data-fancybox=\"group\" data-caption=\"' +\n    imgAlt +\n    '\">' +\n    outer +\n    '</a>'\n}\n\nexport default () => {\n  document.querySelectorAll('.article-entry img').forEach(fancyBoxInit)\n  document.querySelectorAll('.about-body container img').forEach(fancyBoxInit)\n}\n","import init from './init'\nimport { scroll } from './scroll'\nimport './initSidebar'\nimport { initMobile } from './mobile'\nimport InitSidebarLink from './tag'\nimport toc from './toc'\nimport fancybox from './fancybox'\n\nlet logStyle =\n  'color: #fff; background: #f75357; padding: 1px; border-radius: 5px;'\nconsole.info('%c 🎯 hexo-theme-archer ⬇️ ', logStyle)\nconsole.info('%c 🏷 Version: 1.6.1 ', logStyle)\nconsole.info('%c 📅 Version date: 20210204', logStyle)\nconsole.info('%c 📦 https://github.com/fi3ework/hexo-theme-archer ', logStyle)\n\n// remove background placeholder\ninit()\n\n// scroll event\nscroll()\n\n// init sidebar link\nlet metas = new InitSidebarLink()\nmetas.addTab({\n  metaName: 'tags',\n  labelsContainer: '.sidebar-tags-name',\n  postsContainer: '.sidebar-tags-list'\n})\n\nmetas.addTab({\n  metaName: 'categories',\n  labelsContainer: '.sidebar-categories-name',\n  postsContainer: '.sidebar-categories-list'\n})\n\n// init toc\nwindow.addEventListener('load', function (event) {\n  console.log('All resources finished loading!')\n  toc()\n})\n\ninitMobile()\n// initSearch()\n\n// fancybox\nfancybox()\n","import archerUtil from './util'\n\nlet scroll = function() {\n  let $banner = $('.banner:first'),\n    $postBanner = $banner.find('.post-title a'),\n    $bgEle = $('.site-intro:first'),\n    $homeLink = $('.home-link:first'),\n    $backTop = $('.back-top:first'),\n    $sidebarMenu = $('.header-sidebar-menu:first'),\n    bgTitleHeight = $bgEle.offset().top + $bgEle.outerHeight(),\n    $tocWrapper = $('.toc-wrapper:first'),\n    $tocCatalog = $tocWrapper.find('.toc-catalog'),\n    $progressBar = $('.read-progress')\n\n  // toc的收缩\n  $tocCatalog.on('click', function() {\n    $tocWrapper.toggleClass('toc-hide-children')\n  })\n\n  // 滚动式切换文章标题和站点标题\n  let previousHeight = 0,\n    continueScroll = 0\n\n  function isScrollingUpOrDown(currTop) {\n    continueScroll += currTop - previousHeight\n    if (continueScroll > 30) {\n      // 向下滑动\n      continueScroll = 0\n      return 1\n    } else if (continueScroll < -800) {\n      // 向上滑动\n      continueScroll = 0\n      return -1\n    } else {\n      return 0\n    }\n  }\n\n  // 是否在向上或向下滚动\n  let crossingState = -1\n  let isHigherThanIntro = true\n  function isCrossingIntro(currTop) {\n    // 向下滑动超过intro\n    if (currTop > bgTitleHeight) {\n      if (crossingState !== 1) {\n        crossingState = 1\n        isHigherThanIntro = false\n        return 1\n      }\n    } else {\n      // 向上滑动超过intro\n      if (crossingState !== -1) {\n        crossingState = -1\n        isHigherThanIntro = true\n        return -1\n      }\n    }\n    return 0\n  }\n\n  // 判断是否为post-page\n  let isPostPage = false\n  let articleHeight, articleTop\n  if ($('.post-body').length) {\n    isPostPage = true\n    articleTop = bgTitleHeight\n    // 如果执行时动画已执行完毕\n    articleHeight = $('.article-entry').outerHeight()\n    // 如果执行时动画未执行完毕\n    articleHeight = $('.container')[0].addEventListener('transitionend', () => {\n      articleHeight = $('.article-entry').outerHeight()\n    })\n  }\n\n  function updateProgress(scrollTop, beginY, contentHeight) {\n    let windowHeight = $(window).height()\n    let readPercent\n    if (scrollTop < bgTitleHeight) {\n      readPercent = 0\n    } else {\n      readPercent =\n        ((scrollTop - beginY) / (contentHeight - windowHeight)) * 100\n    }\n    // 防止文章过短，产生负百分比\n    readPercent = readPercent >= 0 ? readPercent : 100\n    let restPercent = readPercent - 100 <= 0 ? readPercent - 100 : 0\n    $progressBar[0].style.transform = `translate3d(${restPercent}%, 0, 0)`\n  }\n\n  // rAF操作\n  let tickingScroll = false\n  function updateScroll(scrollTop) {\n    let crossingState = isCrossingIntro(scrollTop)\n    // intro边界切换\n    if (crossingState === 1) {\n      $tocWrapper.addClass('toc-fixed')\n      $homeLink.addClass('home-link-hide')\n      $backTop.addClass('back-top-show')\n      $sidebarMenu.addClass('header-sidebar-menu-black')\n    } else if (crossingState === -1) {\n      $tocWrapper.removeClass('toc-fixed')\n      $homeLink.removeClass('home-link-hide')\n      $banner.removeClass('banner-show')\n      $backTop.removeClass('back-top-show')\n      $sidebarMenu.removeClass('header-sidebar-menu-black')\n    }\n    // 如果不是post - page 以下忽略\n    if (isPostPage) {\n      // 上下滑动一定距离显示/隐藏header\n      let upDownState = isScrollingUpOrDown(scrollTop)\n      if (upDownState === 1) {\n        $banner.removeClass('banner-show')\n      } else if (upDownState === -1 && !isHigherThanIntro) {\n        $banner.addClass('banner-show')\n      }\n      // 进度条君的长度\n      updateProgress(scrollTop, articleTop, articleHeight)\n    }\n    previousHeight = scrollTop\n    tickingScroll = false\n  }\n\n  // scroll回调\n  function onScroll() {\n    let scrollTop = $(document).scrollTop()\n    let bindedUpdate = updateScroll.bind(null, scrollTop)\n    archerUtil.rafTick(tickingScroll, bindedUpdate)\n  }\n\n  $(document).on('scroll', onScroll)\n\n  // 返回顶部\n  ;[$postBanner, $backTop].forEach(function(ele) {\n    ele.on('click', archerUtil.backTop)\n  })\n}\n\nexport { scroll }\n"],"sourceRoot":""}